"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7291],{29801:function(e,t,n){n.d(t,{Mn:function(){return s},My:function(){return a},W2:function(){return o}});var r=n(30577);r.Am.configure();var s=function(e){var t="string"===typeof e?e:"error";r.Am.error(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},a=function(e){var t="string"===typeof e?e:"success";r.Am.success(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},o=function(e){var t="string"===typeof e?e:"success";r.Am.info(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},2557:function(e,t,n){n(72791);var r=n(16587),s=n(98158),a=n(80184);t.Z=function(e){var t=e.type,n=e.className,o=e.disabled,i=e.title,c=e.loading,u=e.content,l=e.color,p=e.onClick;return(0,a.jsx)(s.Z,{content:u,children:(0,a.jsx)("button",{onClick:p,type:t,className:n,disabled:o,children:c?(0,a.jsx)(r.Z,{color:l}):i})})}},16587:function(e,t,n){n(72791);var r=n(32328),s=n(80184);t.Z=function(){return(0,s.jsx)("img",{src:r,alt:"spinner",height:"50px"})}},94924:function(e,t,n){n.d(t,{Z:function(){return s}});n(72791);var r=n(80184),s=function(e){return(0,r.jsx)("div",{className:"error",children:e.children})}},98158:function(e,t,n){n(72791);var r=n(36652),s=n(80184);t.Z=function(e){var t=e.content,n=e.children;return(0,s.jsx)(r.ZP,{content:t,children:n})}},77291:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(70885),s=n(72791),a=(n(7623),n(92506)),o=n(76863),i=n(94924),c=n(16030),u=n(52685),l=n(65804),p=n(2557),d=n(2147),f=n(80184),h=((new Date).getFullYear(),function(){return(0,f.jsxs)("div",{className:"d-flex align-items-end ",children:[(0,f.jsx)("img",{src:d,alt:"footer-logo",style:{height:"30px"}}),(0,f.jsx)("p",{style:{marginLeft:"10px",marginBottom:"0px",paddingBottom:"5px"},children:"Developed and Maintained By Department of Immigration"})]})}),m=function(){var e=(0,c.v9)((function(e){return e.auth.loading})),t=(0,c.I0)(),n=(0,s.useState)("password"),d=(0,r.Z)(n,2),m=d[0],v=d[1],g=o.Ry().shape({username:o.Z_().required("Required!").min(3,"Username must be at least 3 characters").matches(/(?=.*^[A-Za-z_]\w).*$/,"Username should begin with _ or alphabet "),password:o.Z_().required("Required!").min(4,"Password should be at least 4 characters")}),x=function(){v("password"===m?"text":"password")};return(0,f.jsx)("div",{className:"login-bak",children:(0,f.jsx)("div",{className:"account-pages",children:(0,f.jsx)("div",{className:"container",children:(0,f.jsx)("div",{className:"row justify-content-center",children:(0,f.jsxs)("div",{className:"login-position",children:[(0,f.jsxs)("div",{className:"card overflow-hidden card-login",children:[(0,f.jsx)("div",{className:"bg-primary bg-soft",children:(0,f.jsxs)("div",{className:"p-2 mt-3",children:[(0,f.jsx)("h2",{style:{fontWeight:"bold"},children:"Welcome!"}),(0,f.jsx)("h5",{children:"Sign in to continue."})]})}),(0,f.jsx)("div",{className:"login-card-body pt-0",children:(0,f.jsx)("div",{className:"p-2",children:(0,f.jsx)(a.J9,{initialValues:{username:"",password:""},validationSchema:g,onSubmit:function(e){var n=e.username,r=e.password;t((0,u.x4)(n,r))},children:function(){return(0,f.jsxs)(a.l0,{autoComplete:"off",className:"form-horizontal ",children:[(0,f.jsxs)("div",{className:"mb-3 ",children:[(0,f.jsxs)("label",{htmlFor:"username",className:"form-label",style:{fontWeight:"bold",fontSize:"12px"},children:["USERNAME"," ",(0,f.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,f.jsx)(a.gN,{type:"text",className:"form-control textfield-login",name:"username",placeholder:"Enter Username"}),(0,f.jsx)(a.Bc,{name:"username",component:i.Z})]}),(0,f.jsxs)("div",{className:"mb-3  password-field",children:[(0,f.jsxs)("label",{htmlFor:"password",className:"form-label ",style:{fontWeight:"bold",fontSize:"12px"},children:["PASSWORD"," ",(0,f.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)(a.gN,{type:m,className:"form-control textfield-login",name:"password",placeholder:"Enter Password"}),(0,f.jsx)("span",{style:{lineHeight:"10px",top:"11px"},onClick:x,children:"password"===m?(0,f.jsx)(l.cqT,{}):(0,f.jsx)(l.rnh,{})})]}),(0,f.jsx)(a.Bc,{name:"password",component:i.Z})]}),(0,f.jsx)("div",{className:"mt-4 mb-3 text-center w-100",children:(0,f.jsx)(p.Z,{type:"btn",className:"btn btn-primary waves-effect waves-light btn-login",loading:e,disabled:e,title:"Login",content:"Login"})})]})}})})})]}),(0,f.jsx)("div",{className:"mt-3 text-center text-white",children:(0,f.jsx)("div",{children:(0,f.jsx)(h,{})})})]})})})})})}},52685:function(e,t,n){n.d(t,{Cp:function(){return b},Zb:function(){return w},x4:function(){return x},c0:function(){return y},tb:function(){return S}});var r=n(15861),s=n(64687),a=n.n(s),o=n(89731),i=function(e){return o.ZP.post("auth/login",e)},c=function(e){return o.ZP.post("api/v1/user-app/password-reset/",e)},u=function(e){return o.ZP.post("api/v1/user-app/password-reset/confirm/",e)},l=function(e){return o.ZP.patch("auth/change-password",e)},p=function(e){return o.ZP.patch("auth/update-signature",e)},d=n(48044),f=function(){return{type:d.w.LOADING}},h=function(e){return{type:d.w.LOGIN_SUCCESS,payload:e}},m=function(e){return{type:d.w.RESET_SUCCESS,payload:e}},v=function(e){return{type:d.w.PASSWORD_CHANGE_SUCCESS,payload:e}},g=n(29801),x=function(e,t){return function(){var n=(0,r.Z)(a().mark((function n(r){var s,o,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(f()),s={username:e,password:t},n.next=5,i(s);case 5:o=n.sent,c=o.data,(0,g.My)("Welcome ".concat(c.user.username)),r(h(c)),n.next=16;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0,"error"),(0,g.Mn)(n.t0),r((a=n.t0,{type:d.w.LOGIN_FAIL,payload:a}));case 16:case"end":return n.stop()}var a}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=(0,r.Z)(a().mark((function t(n){var r,s,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:d.w.LOADING_RESET_PASSWORD}),r=JSON.stringify({email:e}),t.next=5,c(r);case 5:s=t.sent,o=s.data,n(m(o)),(0,g.My)("Email send successfully "),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),n((a=t.t0,{type:d.w.RESET_FAIL,payload:a})),(0,g.Mn)("There is no active user associated with this e-mail address  || the password can not be changed ");case 15:case"end":return t.stop()}var a}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},w=function(e,t,n,s){return function(){var o=(0,r.Z)(a().mark((function r(o){var i,c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o({type:d.w.LOADING_RESET}),i=JSON.stringify({token:n,password:e,confirm_password:t}),r.next=5,u(i);case 5:c=r.sent,c.data,o({type:d.w.PASSWORD_CONFIRM_SUCCESS}),(0,g.My)("Password has been reset successfully "),o({type:d.w.RESET_SUCCESS,payload:[]}),s.push("/"),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(0),o((a=r.t0,{type:d.w.PASSWORD_CONFIRM_FAIL,payload:a})),(0,g.Mn)("Failed to reset Password");case 17:case"end":return r.stop()}var a}),r,null,[[0,13]])})));return function(e){return o.apply(this,arguments)}}()},b=function(e,t,n,s){return function(){var o=(0,r.Z)(a().mark((function r(o){var i,c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o(f()),i=JSON.stringify({password:t,old_password:e,confirm_password:n}),r.next=5,l(i);case 5:c=r.sent,o(v(c)),(0,g.My)("Password changed successfully "),s.push("/"),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),o((a=r.t0,{type:d.w.PASSWORD_CHANGE_FAIL,payload:a})),(0,g.Mn)(r.t0);case 15:case"end":return r.stop()}var a}),r,null,[[0,11]])})));return function(e){return o.apply(this,arguments)}}()},S=function(e){return function(){var t=(0,r.Z)(a().mark((function t(n){var r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(f()),r=JSON.stringify({signature:e,signatureUpdating:!0}),t.next=5,p(r);case 5:return s=t.sent,(0,g.My)("Signature updated successfully"),n((o=null===s||void 0===s?void 0:s.data,{type:d.w.UPDATE_SIGNATURE_SUCCESS,payload:o})),t.abrupt("return",!0);case 11:t.prev=11,t.t0=t.catch(0),n((a=t.t0,{type:d.w.UPDATE_SIGNATURE_FAIL,payload:a})),(0,g.Mn)(t.t0);case 15:case"end":return t.stop()}var a,o}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}},89731:function(e,t,n){n.d(t,{Yb:function(){return p}});var r=n(15861),s=n(64687),a=n.n(s),o=n(74569),i=n.n(o),c=n(90106),u=n(48044),l=n(30577),p=(i().create({baseURL:"http://chinapass.sushiloli.com.np"}),i().create({baseURL:"http://localhost:9010",headers:{"Content-Type":"application/json"}})),d=i().create({baseURL:"http://chinapass.sushiloli.com.np",headers:{"Content-Type":"application/json"}});d.interceptors.request.use((function(e){if(window.navigator.onLine)return e.headers.Authorization=localStorage.getItem("accessToken")?"Bearer ".concat(localStorage.getItem("accessToken")):null,e.baseURL="http://chinapass.sushiloli.com.np",e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,s,o,i,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.config,401===t.response.status&&"auth/token/refresh"===i.url&&c.h.dispatch({type:u.w.AUTH_ERROR}),"token_not_valid"!==(null===(n=t.response)||void 0===n?void 0:n.data.code)||i._retry){e.next=19;break}return i._retry=!0,e.prev=4,p=JSON.stringify({refresh:localStorage.getItem("refreshToken")}),localStorage.removeItem("accessToken"),e.next=9,d.post("auth/token/refresh",p);case 9:if(200!==(f=e.sent).status){e.next=14;break}return localStorage.setItem("accessToken",null===f||void 0===f?void 0:f.data.access),i.headers.Authorization="Bearer ".concat(null===f||void 0===f?void 0:f.data.access),e.abrupt("return",d(i));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),c.h.dispatch({type:u.w.AUTH_ERROR});case 19:if("No Internet"===t&&l.Am.error("No Internet Connection !!!"),"Network Error"===t.message&&l.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),500===(null===(r=t.response)||void 0===r?void 0:r.status)&&l.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),404===(null===(s=t.response)||void 0===s?void 0:s.status)&&l.Am.error("Page Not Found !!!!!",{autoClose:1200}),401!==(null===(o=t.response)||void 0===o?void 0:o.status)&&"Invalid token specified"!==t.message){e.next=26;break}return c.h.dispatch({type:u.w.AUTH_ERROR}),e.abrupt("return",Promise.reject(t.response.data.detail));case 26:if(!(t.response&&t.response.status>=400&&t.response.status<500)){e.next=33;break}if(!t.response.data.detail){e.next=32;break}return e.abrupt("return",Promise.reject("".concat(t.response.data.detail)));case 32:return e.abrupt("return",Promise.reject("".concat(t.response.statusText)));case 33:return e.abrupt("return",Promise.reject(t));case 34:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),t.ZP=d},7623:function(){},32328:function(e,t,n){e.exports=n.p+"static/media/spinner.9012f56ae4662e1be3c6.gif"}}]);
//# sourceMappingURL=7291.8dc010c2.chunk.js.map