"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2550],{66096:function(e,t,n){n(72791);var r=n(84341),a=n(80184);t.Z=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(r.ZP,{height:40}),(0,a.jsx)(r.ZP,{count:10,height:25})]}),(0,a.jsxs)("div",{className:"row d-flex mt-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(r.ZP,{width:220,height:20})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:200,height:30})})]})]})}},86677:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(70885),a=n(72791),c=n(16030),s=n(12721),i=n(67339),u=n(12202),o=n(93969),l=n(98158),d=n(90883),p=n(81829),f=n(80184),m=function(e){var t=e.currentPage,n=e.postsPerPage,s=e.setCurrentPage,m=e.count,h=e.setShowModal,v=e.maxPageNumberLimit,x=e.setMaxPageNumberLimit,g=e.minPageNumberLimit,j=e.setMinPageNumberLimit,P=e.search,b=(0,c.v9)((function(e){return e.auth})),N=(b.permissions,b.isAdmin),Z=(0,c.v9)((function(e){return e.auth.isSuperuser})),y=(0,c.v9)((function(e){return e.role})),w=y.roles,k=y.next,A=y.previous,S=(0,c.I0)(),L=(0,a.useState)(5),R=(0,r.Z)(L,1)[0],E=N||Z;return(0,f.jsx)(f.Fragment,{children:(null===w||void 0===w?void 0:w.length)>0?(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsx)("div",{className:"table-scrollable",children:(0,f.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"col",style:{width:"8%"},children:"S.N"}),(0,f.jsx)("th",{scope:"col",children:"Name"}),(0,f.jsx)("th",{scope:"col",children:"Status"}),(0,f.jsx)("th",{scope:"col",children:"Action"})]})}),(0,f.jsx)("tbody",{children:(null===w||void 0===w?void 0:w.length)>0&&w.map((function(e,r){var a=e.id,c=e.name,s=(e.email,e.isActive);return(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"row",style:{width:"8%"},children:n*(t-1)+(r+1)}),(0,f.jsx)("td",{children:c}),(0,f.jsx)("td",{children:(0,f.jsx)(o.Z,{active:s})}),(0,f.jsx)("td",{children:(N||Z)&&(0,f.jsx)(l.Z,{content:"Edit",children:(0,f.jsx)("button",{className:"btn btn-sm btn-edit btn-primary mx-1",onClick:function(){return function(e){S((0,i.Aq)(e)),h(!0)}(a)},children:(0,f.jsx)(u.fmQ,{})})})})]},a)}))})]})}),m>0&&(0,f.jsx)(d.Z,{currentPage:t,postsPerPage:n,count:m,paginate:function(e){S((0,i.R8)({number:e,postsPerPage:n})),s(e)},handleClick:function(e){"previous"===e?(S((0,i.TI)(A)),s((function(e){return e-1})),(t-1)%R===0&&(x(v-R),j(g-R))):"next"===e&&(S((0,i.hj)(k)),s((function(e){return e+1})),t+1>v&&(x(v+R),j(g+R)))},setCurrentPage:s,minPageNumberLimit:g,maxPageNumberLimit:v})]}):(0,f.jsx)(p.Z,{search:P,onClick:function(){return h(!0)},addPermission:E})})},h=a.memo(m),v=n(50645),x=n(537),g=n(66096),j=n(15861),P=n(64687),b=n.n(P),N=n(92506),Z=n(76863),y=n(94924),w=(n(29801),n(87273),n(2557)),k=(0,a.lazy)((function(){return n.e(7476).then(n.bind(n,57476))})),A=function(e){var t=e.currentPage,n=e.loading,s=e.setShowModal,u=e.role,o=e.edit,l=(0,c.I0)(),d=(0,a.useState)([]),p=(0,r.Z)(d,2),m=p[0],h=p[1],v=(0,a.useState)([]),x=(0,r.Z)(v,2),g=x[0],P=x[1],A={name:o?null===u||void 0===u?void 0:u.name:"",permissions:o&&u?null===u||void 0===u?void 0:u.permissions:[],remarks:"",isActive:!!o&&(null===u||void 0===u?void 0:u.isActive)},S=Z.Ry().shape({name:Z.Z_().required("First Name required").min(3,"First name must be at least 2 characters."),isActive:Z.Xg(),remarks:Z.Z_()}),L=function(){var e=(0,j.Z)(b().mark((function e(n){var r,a,c,d,p,f,h,v;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name,a=n.remarks,c=n.isActive,d=(null===r||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===r||void 0===r?void 0:r.slice(1)),p=m.map((function(e){return e.id})),!o){e.next=11;break}return f=u.id,e.next=7,l((0,i.ul)(f,{name:d,permissions:p,isActive:c,remarks:a},t));case 7:h=e.sent,s(!h),e.next=15;break;case 11:return e.next=13,l((0,i.fA)({name:d,permissions:p,isActive:c,remarks:a},t));case 13:v=e.sent,s(!v);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"row justify-content-center mt-3",children:(0,f.jsx)("div",{className:"col-12",children:(0,f.jsx)("div",{className:"registration-process ",children:(0,f.jsx)(N.J9,{enableReinitialize:!0,initialValues:A,validationSchema:S,onSubmit:L,children:function(e){e.setFieldValue;return(0,f.jsxs)(N.l0,{autoComplete:"off",children:[(0,f.jsx)("div",{className:"form-group row mb-2 justify-content-center",children:(0,f.jsxs)("div",{className:" col-12",children:[(0,f.jsxs)("label",{htmlFor:"name",className:"fw-bold float-start",children:["Role Name"," ",(0,f.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,f.jsx)(N.gN,{type:"text",name:"name",className:"form-control ",placeholder:"Role Name"}),(0,f.jsx)(N.Bc,{name:"name",component:y.Z})]})}),(0,f.jsx)(k,{selectedPermissions:m,setSelectedPermissions:h,holdPermissions:g,setHoldPermissions:P,role:u,edit:o}),(0,f.jsx)("div",{className:"form-group row mb-2",children:(0,f.jsxs)("div",{className:"col-12 text-center",children:[(0,f.jsx)(N.gN,{type:"checkbox",name:"isActive",id:"isActive",className:"filled-in chk-col-blue"}),(0,f.jsxs)("label",{htmlFor:"isActive",className:"fw-bold  mx-2",children:[" ","Active"]})]})}),(0,f.jsx)("div",{className:"form-group text-center",children:(0,f.jsx)(w.Z,{type:"btn",className:"btn btn-primary",loading:n,title:o?"Update":"Create",content:o?"Update":"Create"})})]})}})})})})})},S=a.memo(A),L=n(66495),R=function(){(0,c.v9)((function(e){return e.auth.permissions}));var e=(0,c.v9)((function(e){return e.auth.isAdmin})),t=(0,c.v9)((function(e){return e.auth.isSuperuser})),n=(0,c.v9)((function(e){return e.role})),o=n.roles,d=n.role,p=n.edit,m=n.loading,j=n.count,P=n.loadingUpdated,b=(0,c.v9)((function(e){return e.search})).search,N=(0,c.I0)(),Z=(0,a.useState)(!1),y=(0,r.Z)(Z,2),w=y[0],k=y[1],A=(0,a.useState)(1),R=(0,r.Z)(A,2),E=R[0],M=R[1],_=(0,a.useState)(5),C=(0,r.Z)(_,2),I=C[0],F=C[1],O=(0,a.useState)(0),T=(0,r.Z)(O,2),U=T[0],D=T[1],G=(0,a.useState)(10),q=(0,r.Z)(G,2),z=q[0],H=q[1];return(0,a.useEffect)((function(){0===z?N(""===b?(0,i.cY)(j):(0,i.o1)(b,j)):""===b?(z===v.P||M(1),N((0,i.cY)(z))):(M(1),F(5),D(0),N((0,i.o1)(b,z)))}),[N,z,b]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"user-card",children:[(0,f.jsx)("div",{className:"header-content",children:(0,f.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Roles Listing"})}),(0,f.jsxs)("div",{className:"".concat((null===o||void 0===o?void 0:o.length)>0?"office-card-body":"card-body"),children:[(0,f.jsx)("div",{className:"row m-0 p-0",children:(null===o||void 0===o?void 0:o.length)>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"col-6",children:(0,f.jsx)(x.Z,{postsPerPage:z,setPostsPerPage:H})}),(0,f.jsx)("div",{className:"col-6 text-right",children:e&&t&&(0,f.jsx)(l.Z,{content:"Add",children:(0,f.jsxs)("button",{type:"button",className:"btn btn-primary waves-effect waves-light btn-sm float-end",onClick:function(){return k(!0)},children:[(0,f.jsx)(u.wEH,{className:"mb-1"}),"\xa0Add New"]})})})]})}),m&&(0,f.jsx)(s.Z,{}),P&&(0,f.jsx)(g.Z,{}),!m&&!P&&(0,f.jsx)(h,{currentPage:E,setCurrentPage:M,postsPerPage:z,setPostsPerPage:H,count:j,maxPageNumberLimit:I,setMaxPageNumberLimit:F,minPageNumberLimit:U,setMinPageNumberLimit:D,search:b,setShowModal:k}),w&&(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)("div",{}),children:(0,f.jsx)(L.Z,{header:p?"Edit Role":"Role",types:"role",size:"modal-xl",setShowModal:k,showModal:w,edit:p,clearAction:i.FC,children:(0,f.jsx)(S,{setShowModal:k,showModal:w,edit:p,role:d,currentPage:E})})})]})]})})}},67339:function(e,t,n){n.d(t,{FC:function(){return M},fA:function(){return S},Aq:function(){return L},Hj:function(){return _},hj:function(){return k},R8:function(){return A},TI:function(){return w},cY:function(){return y},o1:function(){return E},ul:function(){return R}});var r=n(15861),a=n(64687),c=n.n(a),s=n(89731),i="auth/groups",u=function(e){return s.ZP.get("".concat(i,"?offset=0&limit=").concat(e,"&ordering=-id"))},o=function(e,t){return s.ZP.get("".concat(i,"?offset=").concat((e-1)*t,"&limit=").concat(t,"&ordering=-id"))},l=function(e){return s.ZP.get(e)},d=function(e){return s.ZP.get(e)},p=function(e,t){return s.ZP.get("".concat(i,"?offset=0&limit=").concat(t,"&search=").concat(e))},f=function(e){return s.ZP.post("auth/group/create",e)},m=function(e){return s.ZP.get("auth/groups/".concat(e))},h=function(e,t){return s.ZP.patch("".concat(i,"/").concat(e),t)},v=n(1355),x=function(){return{type:v.h.LOADING_ROLE}},g=function(){return{type:v.h.LOADING_UPDATE_ROLE}},j=function(e){return{type:v.h.GET_ROLE_SUCCESS,payload:e}},P=function(e){return{type:v.h.GET_ROLE_FAIL,payload:e}},b=function(e){return{type:v.h.GET_EDIT_ROLE,payload:e}},N=function(e){return{type:v.h.GET_ALL_PERMISSION_SUCCESS,payload:e}},Z=n(29801),y=function(e){return function(){var t=(0,r.Z)(c().mark((function t(n){var r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,u(e);case 4:return r=t.sent,a=r.data,n(j(a)),t.abrupt("return",!0);case 10:t.prev=10,t.t0=t.catch(0),n(P(t.t0)),(0,Z.Mn)(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=(0,r.Z)(c().mark((function t(n){var r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,d(e);case 4:r=t.sent,a=r.data,n(j(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(P(t.t0)),(0,Z.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=(0,r.Z)(c().mark((function t(n){var r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,l(e);case 4:r=t.sent,a=r.data,n(j(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(P(t.t0)),(0,Z.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){var t=e.number,n=e.postsPerPage;return function(){var e=(0,r.Z)(c().mark((function e(r){var a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(x()),e.next=4,o(t,n);case 4:a=e.sent,s=a.data,r(j(s)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(P(e.t0)),(0,Z.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},S=function(e,t){return function(){var n=(0,r.Z)(c().mark((function n(r){var a,s,i,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.name,s=e.permissions,i=e.isActive,n.prev=1,r(x()),u=JSON.stringify({name:a,permissions:s,isActive:i}),n.next=6,f(u);case 6:return(0,Z.My)("Role created successfully "),r(A({currentPage:t,postsPerPage:10})),n.abrupt("return",!0);case 11:n.prev=11,n.t0=n.catch(1),r((c=n.t0,{type:v.h.CREATE_ROLE_FAIL,payload:c})),(0,Z.Mn)("Failed to create Role.");case 15:case"end":return n.stop()}var c}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},L=function(e){return function(){var t=(0,r.Z)(c().mark((function t(n){var r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m(e);case 3:return r=t.sent,a=r.data,n(b(a)),t.abrupt("return",!0);case 9:t.prev=9,t.t0=t.catch(0),(0,Z.Mn)("Failed to delete Role ");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},R=function(e,t,n){return function(){var a=(0,r.Z)(c().mark((function r(a){var s,i,u,o,l,d;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.name,i=t.permissions,u=t.remarks,o=t.isActive,r.prev=1,a(g()),l=JSON.stringify({name:s,permissions:i,remarks:u,isActive:o}),a(g()),r.next=7,h(e,l);case 7:return d=r.sent,d.data,(0,Z.My)("Role Updated Successfully "),a(A({currentPage:n,commonData:10})),r.abrupt("return",!0);case 14:r.prev=14,r.t0=r.catch(1),a((c=r.t0,{type:v.h.UPDATE_ROLE_FAIL,payload:c})),(0,Z.Mn)("Failed to Update Role");case 18:case"end":return r.stop()}var c}),r,null,[[1,14]])})));return function(e){return a.apply(this,arguments)}}()},E=function(e,t){return function(){var n=(0,r.Z)(c().mark((function n(r){var a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(x()),n.next=4,p(e,t);case 4:a=n.sent,s=a.data,r(j(s)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(P(n.t0)),(0,Z.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},M=function(){return function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:v.h.CLEAR_DATA}),e.abrupt("return",!0);case 5:e.prev=5,e.t0=e.catch(0),(0,Z.Mn)(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},_=function(){return function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:v.h.LOADING_PERMISSIONS}),e.next=4,s.ZP.get("auth/permissions?limit=0&search=");case 4:return n=e.sent,r=n.data,t(N(r)),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e.catch(0),t((a=e.t0,{type:v.h.GET_ALL_PERMISSION_FAIL,payload:a})),(0,Z.Mn)(e.t0);case 14:case"end":return e.stop()}var a}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}},79814:function(e,t,n){n.d(t,{Nq:function(){return o},PR:function(){return a},Rv:function(){return i},TI:function(){return c},hj:function(){return s},o1:function(){return l},oi:function(){return p},pX:function(){return d},r4:function(){return u}});var r=n(89731),a=function(e){return r.ZP.get("api/v1/core-app/users/list?offset=0&limit=".concat(e,"&ordering=-id"))},c=function(e){return r.ZP.get(e)},s=function(e){return r.ZP.get(e)},i=function(e,t){return r.ZP.get("api/v1/core-app/users/list?offset=".concat((e-1)*t,"&limit=").concat(t,"&ordering=-id"))},u=function(e){return r.ZP.post("api/v1/core-app/user",e)},o=function(e,t){return r.ZP.patch("api/v1/core-app/user/".concat(e),t)},l=function(e,t){return r.ZP.get("api/v1/core-app/users/list?offset=0&limit=".concat(t,"&search=").concat(e))},d=function(e,t){return r.ZP.get("api/v1/core-app/users/list?username=".concat(e.target.value.trim()),{cancelToken:t.token})},p=function(e,t){return r.ZP.patch("/auth/change-password/".concat(e),{password:t})}},87273:function(e,t,n){n.d(t,{k:function(){return l}});var r,a=n(15861),c=n(64687),s=n.n(c),i=n(74569),u=n.n(i),o=n(79814),l=function(){var e=(0,a.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"!==typeof r&&r.cancel("Operation canceled due to new request."),r=u().CancelToken.source(),e.prev=2,e.next=5,(0,o.pX)(t,r);case 5:if(n=e.sent,!((a=n.data).data.length>0)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(a.data.length<=0)){e.next=11;break}return e.abrupt("return",!1);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(2);case 15:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=2550.cae1628e.chunk.js.map