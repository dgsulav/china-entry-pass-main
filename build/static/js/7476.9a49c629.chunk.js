"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7476],{57476:function(e,n,i){i.r(n),i.d(n,{default:function(){return m}});var s=i(42982),t=i(70885),l=i(72791),r=i(16030),c=i(12202),o=i(80184),d=function(e){var n=e.permissions,i=e.title,t=e.checkedPermissions,l=e.setCheckedPermissions,r=function(e){if(0===(null===t||void 0===t?void 0:t.filter((function(n){return n.id===e.id}))).length)l([].concat((0,s.Z)(t),[e]));else{var n=null===t||void 0===t?void 0:t.filter((function(n){return n.id!==e.id}));l(n)}};return(0,o.jsx)("div",{className:"col-sm-5 mt-2 mb-2",children:(0,o.jsxs)("div",{className:"card-permission",children:[(0,o.jsx)("div",{className:"header-content mb-0",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-1 px-1",children:(0,o.jsx)("input",{type:"checkbox",name:i,checked:t.length===(null===n||void 0===n?void 0:n.length)&&0!==n.length,onChange:function(){return function(e){e.length!==(null===t||void 0===t?void 0:t.length)?l(e):l([])}(n)},disabled:0===n.length})}),(0,o.jsxs)("div",{className:"col-11 px-0",children:[(0,o.jsx)("h4",{className:"m-0",children:i}),(0,o.jsx)("p",{className:"m-0",children:"".concat(t.length,"/").concat(n.length," selected")})]})]})}),(0,o.jsx)("div",{className:"card-body p-0 d-block",children:(0,o.jsx)("div",{className:"permission-list",children:(0,o.jsx)("ul",{className:"list-permission",style:{listStyleType:"none"},children:n.length>0&&n.map((function(e){return(0,o.jsx)("li",{className:"list-group-permission",onClick:function(){return r(e)},children:(0,o.jsxs)("div",{className:"row align-text-center",children:[(0,o.jsx)("div",{className:"col-1 px-1",children:(0,o.jsx)("input",{type:"checkbox",name:e.name,checked:t.includes(e),onChange:function(){return r(e)}})}),(0,o.jsx)("div",{className:"col-11 px-0",children:e.name})]})},e.id)}))})})})]})})},a=i(29801),u=i(67339),m=function(e){var n=e.selectedPermissions,i=e.setSelectedPermissions,m=e.holdPermissions,h=e.setHoldPermissions,f=e.role,v=e.edit,p=(0,r.I0)(),g=(0,r.v9)((function(e){return e.role.permissions})),x=(0,l.useState)([]),j=(0,t.Z)(x,2),k=j[0],N=j[1],b=(0,l.useState)([]),P=(0,t.Z)(b,2),y=P[0],C=P[1],Z=(0,l.useState)([]),S=(0,t.Z)(Z,2),w=S[0],M=S[1];(0,l.useEffect)((function(){p((0,u.Hj)())}),[p]),(0,l.useEffect)((function(){if(v){if((null===f||void 0===f?void 0:f.permissions.length)>0&&0===n.length)if(m.length>0){var e=m.map((function(e){return e.id})),s=f.permissions.filter((function(n){return!e.includes(n)})),t=g.filter((function(e){return!s.includes(e.id)})),l=g.filter((function(e){return s.includes(e.id)}));N(t),i(l)}else{var r=null===g||void 0===g?void 0:g.filter((function(e){return!(null!==f&&void 0!==f&&f.permissions.includes(e.id))})),c=g.filter((function(e){return null===f||void 0===f?void 0:f.permissions.includes(e.id)}));N(r),i(c)}else if((null===f||void 0===f?void 0:f.permissions.length)>0&&n.length>0){var o=g.filter((function(e){return!n.find((function(n){var i=n.id;return e.id===i}))}));N(o)}else if(g.length>0)if(n.length>0){var d=g.filter((function(e){return!n.find((function(n){var i=n.id;return e.id===i}))}));N(d)}else N(g)}else if(g.length>0)if(n.length>0){var a=g.filter((function(e){return!n.find((function(n){var i=n.id;return e.id===i}))}));N(a)}else N(g)}),[g,v]);return(0,o.jsxs)("div",{className:"row permission-container",children:[(0,o.jsx)("div",{className:"col-12 title-container",children:(0,o.jsx)("h5",{children:"Add User Permission"})}),(0,o.jsx)(d,{permissions:k,title:"UnSelected Permissions",checkedPermissions:w,setCheckedPermissions:M}),(0,o.jsx)("div",{className:"col-sm-2 d-flex p-0 align-items-center justify-content-center",children:(0,o.jsxs)("div",{className:"align-middle",children:[(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"button",className:"btn btn-sm",onClick:function(){if(w.length>0&&0===y.length){var e=k.filter((function(e){return!w.find((function(n){var i=n.id;return e.id===i}))}));i([].concat((0,s.Z)(n),(0,s.Z)(w))),N(e),M([])}else 0===w.length&&0===y.length?(0,a.Mn)("Please select permission from unselected permissions"):(0,a.Mn)("Yo have checked some permission from selected permissions.Please uncheck them and try again")},disabled:0===k.length,children:(0,o.jsx)(c.Z1Y,{})})}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"button",className:" btn btn-sm mt-2",onClick:function(){if(y.length>0&&0===w.length)if(g.filter((function(e){return y.find((function(n){var i=n.id;return e.id===i}))})).length===y.length){var e=n.filter((function(e){return!y.find((function(n){var i=n.id;return e.id===i}))}));N([].concat((0,s.Z)(k),(0,s.Z)(y))),i(e),v&&h(y),C([])}else(0,a.Mn)("You are trying to remove permission of another module.Please check the module and remove related permissions");else 0===w.length&&0===y.length?(0,a.Mn)("Please select permission from selected permissions"):(0,a.Mn)("Yo have checked some permission from unselected permissions.Please uncheck them and try again")},disabled:0===n.length,children:(0,o.jsx)(c.x_l,{})})})]})}),(0,o.jsx)(d,{permissions:n,title:"Selected Permissions",checkedPermissions:y,setCheckedPermissions:C})]})}}}]);
//# sourceMappingURL=7476.9a49c629.chunk.js.map