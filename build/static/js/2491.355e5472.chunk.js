"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2491],{42566:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var n=a(70885),l=a(72791),s=a(16030),o=a(15861),r=a(64687),d=a.n(r),i=a(10114),c=a(96063),u=a(92506),m=a(59513),f=a.n(m),h=a(29815),D=a(76863),p=a(2557),v=a(94924),b=a(59990),x=a(48963),S=a(2664),g=a(25922),j=a(31274),y=a(3777),w=a(80184),R=function(e){var t=e.name,a=e.setShowExcelReportModal,r=e.setShowPDFReportModal,m=e.setShowReportModal,R=e.reportStartDate,F=e.setReportStartDate,N=e.reportEndDate,k=e.setReportEndDate,C=e.setFormData,V=(0,s.I0)(),M=(0,l.useState)(!0),E=(0,n.Z)(M,2),A=E[0],Z=(E[1],(0,s.v9)((function(e){return e.auth.office}))),L={office:null!==Z?Z:null,status:null,adSystem:!0,bsSystem:!1,startDate:(new Date).toLocaleDateString("fr-CA"),endDate:(new Date).toLocaleDateString("fr-CA"),quickReport:!0,pdfReport:!1,excelReport:!1,district:null},P=D.Ry().shape({adSystem:D.Xg(),bsSystem:D.Xg(),startDate:D.Z_().test("startDate","Start Date cannot be greater than today's date",(function(e){var t=this.parent.adSystem,a=void 0!==e?10===e.length&&!1===t?(0,i.bsToAd)(e):e:"";return!(t&&void 0!==e&&new Date(e)>new Date)&&!(!1===t&&void 0!==e&&new Date(a)>new Date)})).test("startDate","Start Date cannot be greater than end Date",(function(e){var t=this.parent,a=t.adSystem,n=t.endDate,l=void 0!==e?10===e.length&&!1===a?(0,i.bsToAd)(e):e:"";return!(a&&void 0!==e&&new Date(e)>new Date(n))&&!(!1===a&&void 0!==e&&new Date(l)>new Date(n))})),endDate:D.Z_().test("endDate","End Date cannot be greater than today's date",(function(e){var t=this.parent.adSystem,a=void 0!==e?10===e.length&&!1===t?(0,i.bsToAd)(e):e:"";return!(t&&void 0!==e&&new Date(e)>new Date)&&!(!1===t&&void 0!==e&&new Date(a)>new Date)})).test("endDate","End Date cannot be less than start Date",(function(e){var t=this.parent,a=t.adSystem,n=t.startDate,l=10===n.length&&!1===a?(0,i.bsToAd)(n):n,s=void 0!==e?10===e.length&&!1===a?(0,i.bsToAd)(e):e:"";return!(a&&void 0!==e&&new Date(e)<new Date(l))&&!(!1===a&&void 0!==e&&new Date(s)<new Date(l))})),office:D.Ry().nullable(!0),status:D.Ry().nullable(!0),quickReport:D.Xg(),pdfReport:D.Xg(),excelReport:D.Xg()}),Y=function(){var e=(0,o.Z)(d().mark((function e(n){var l,s,o,i,c,u,f,h,D,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=n.startDate,s=n.endDate,o=n.adSystem,i=n.quickReport,c=n.pdfReport,u=n.office,f=n.status,h=o?(0,S.P)(new Date(l)):R,D=o?(0,S.P)(new Date(s)):N,p={formatedStartDate:h,formatedEndDate:D,office:null!==u&&void 0!==u&&u.id?null===u||void 0===u?void 0:u.id:"",status:null!==f&&void 0!==f&&f.id?null===f||void 0===f?void 0:f.id:""},C(p),V({type:b.L.CLEAR_ALL_DATA}),i?A?"report"===t&&(V((0,x.Yd)(10,p)),m(!0),a(!1),r(!1)):"report"===t&&(V((0,x.es)(p)),m(!0),a(!1),r(!1)):c?"report"===t&&(V((0,x.es)(p)),r(!0),m(!1),a(!1)):"report"===t&&(V((0,x.es)(p)),a(!0),r(!1),m(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"row justify-content-center",children:(0,w.jsx)("div",{className:"col-md-7 ",style:{paddingBottom:"10",marginBottom:"10%"},children:(0,w.jsx)("div",{className:"card mb-5 mt-3 bg-white rounded",children:(0,w.jsx)("div",{className:"",style:{backgroundColor:"#f1f1f1",padding:"20px"},children:(0,w.jsx)(u.J9,{enableReinitialize:!0,initialValues:L,validationSchema:P,onSubmit:Y,children:function(e){return(0,w.jsxs)(u.l0,{autoComplete:"off",children:[(0,w.jsxs)("div",{className:"form-group row justify-content-center",children:[(0,w.jsxs)("div",{className:"col-5",children:[(0,w.jsx)("label",{htmlFor:"office",className:"fw-bold",children:"Office"}),(0,w.jsx)(h.n9,{blurInputOnSelect:!0,value:e.values.office,isClearable:"true",isSearchable:"true",name:"office",inputId:"input",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(t){e.setFieldValue("office",t)},isDisabled:null!==Z,loadOptions:y.h,additional:{offset:0,limit:10}}),(0,w.jsx)(u.Bc,{name:"office",component:v.Z})]}),(0,w.jsxs)("div",{className:"col-5",children:[(0,w.jsx)("label",{htmlFor:"status",className:"fw-bold",children:"Type"}),(0,w.jsx)(j.ZP,{value:e.values.status,isClearable:"true",isSearchable:"true",name:"status",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},options:g.EQ,onChange:function(t){e.setFieldValue("status",t)}}),(0,w.jsx)(u.Bc,{name:"status",component:v.Z})]})]}),(0,w.jsxs)("div",{className:"form-group row mb-5 justify-content-center",children:[(0,w.jsxs)("div",{className:"col-5 text-center m-3",children:[(0,w.jsx)(u.gN,{type:"checkbox",name:"adSystem",id:"adSystem",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("startDate",(new Date).toLocaleDateString("fr-CA")),e.setFieldValue("endDate",(new Date).toLocaleDateString("fr-CA")),e.setFieldValue("adSystem",t.target.checked),e.setFieldValue("bsSystem",!1)}}),(0,w.jsx)("label",{htmlFor:"adSystem",className:"ml-2 fw-bold",children:"A.D System"})]}),(0,w.jsxs)("div",{className:"col-5 text-center m-3",children:[(0,w.jsx)(u.gN,{type:"checkbox",name:"bsSystem",id:"bsSystem",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("bsSystem",t.target.checked),e.setFieldValue("adSystem",!1)}}),(0,w.jsxs)("label",{htmlFor:"bsSystem",className:"mx-2 fw-bold",children:[" ","B.S System"]})]}),(0,w.jsxs)("div",{className:"col-5",children:[(0,w.jsx)("label",{htmlFor:"from_date",className:"fw-bold",children:"Start Date"}),e.values.bsSystem?(0,w.jsx)(c.default,{value:e.values.startDate,onChange:function(t){var a=t.bsDate,n=t.adDate;e.setFieldValue("startDate",a),F(n)},className:"form-control",label:"Start Date",name:"startDate",language:"en",dateFormat:"YYYY-MM-DD",style:{backgroundColor:"white !important"}}):(0,w.jsx)(f(),{value:e.values.startDate,format:"yyyy-MM-dd",label:"Start Date",name:"startDate",className:"form-control",style:{backgroundColor:"white !important"},onChange:function(t){e.setFieldValue("startDate",null===t||void 0===t?void 0:t.toLocaleDateString("fr-CA")),F(t)}}),(0,w.jsx)(u.Bc,{component:v.Z,name:"startDate"})]}),(0,w.jsxs)("div",{className:"col-5",children:[(0,w.jsx)("label",{htmlFor:"endDate",className:"fw-bold",children:"End Date"}),e.values.bsSystem?(0,w.jsx)(c.default,{value:e.values.endDate,onChange:function(t){var a=t.bsDate,n=t.adDate;e.setFieldValue("endDate",a),k(n)},className:"form-control",label:"End Date",name:"endDate",language:"en",dateFormat:"YYYY-MM-DD"}):(0,w.jsx)(f(),{value:e.values.endDate,format:"yyyy-MM-dd",label:"End Date",name:"endDate",className:"form-control",onChange:function(t){e.setFieldValue("endDate",null===t||void 0===t?void 0:t.toLocaleDateString("fr-CA")),k(t)}}),(0,w.jsx)(u.Bc,{component:v.Z,name:"endDate"})]}),(0,w.jsxs)("div",{className:"col-3 m-3 text-center",children:[(0,w.jsx)(u.gN,{type:"checkbox",name:"quickReport",id:"quickReport",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("quickReport",t.target.checked),e.setFieldValue("pdfReport",!1),e.setFieldValue("excelReport",!1)}}),(0,w.jsxs)("label",{htmlFor:"quickReport",className:"mx-2 fw-bold",children:[" ","Quick Report"]})]}),(0,w.jsxs)("div",{className:"col-3 m-3 text-center",children:[(0,w.jsx)(u.gN,{type:"checkbox",name:"pdfReport",id:"pdfReport",className:"filled-in chk-col-blue ",onChange:function(t){e.setFieldValue("pdfReport",t.target.checked),e.setFieldValue("quickReport",!1),e.setFieldValue("excelReport",!1)}}),(0,w.jsxs)("label",{htmlFor:"pdfReport",className:"mx-2 fw-bold",children:[" ","PDF"]})]})]}),(0,w.jsx)("div",{className:"form-group d-flex justify-content-center mt-3 ",children:(0,w.jsx)(p.Z,{type:"submit",className:"btn btn-primary",title:"Generate",content:"Generate"})})]})}})})})})})})},F=l.memo(R),N=a(58284),k=(0,l.lazy)((function(){return a.e(1931).then(a.bind(a,21931))})),C=(0,l.lazy)((function(){return Promise.all([a.e(5125),a.e(1052),a.e(5117)]).then(a.bind(a,5117))})),V=(0,l.lazy)((function(){return Promise.all([a.e(4133),a.e(1354)]).then(a.bind(a,34418))})),M=function(){var e=(0,s.I0)(),t=(0,s.v9)((function(e){return e.report.cards})),a=(0,l.useState)(new Date),o=(0,n.Z)(a,2),r=o[0],d=o[1],i=(0,l.useState)(new Date),c=(0,n.Z)(i,2),u=c[0],m=c[1],f=(0,l.useState)(null),h=(0,n.Z)(f,2),D=h[0],p=h[1],v=(0,l.useState)(!1),b=(0,n.Z)(v,2),x=b[0],S=b[1],g=(0,l.useState)(!1),j=(0,n.Z)(g,2),y=j[0],R=j[1],M=(0,l.useState)(!1),E=(0,n.Z)(M,2),A=E[0],Z=E[1];return(0,l.useEffect)((function(){e((0,N.Xu)())}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(F,{name:"report",setShowExcelReportModal:Z,setShowPDFReportModal:R,setShowReportModal:S,reportStartDate:r,setReportStartDate:d,reportEndDate:u,setReportEndDate:m,setFormData:p}),(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)("div",{children:"Loading..."}),children:x&&(null===t||void 0===t?void 0:t.length)>0&&(0,w.jsx)(k,{showReportModal:x,setShowReportModal:S,formData:D,cards:t})}),(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)("div",{children:"Loading..."}),children:y&&(null===t||void 0===t?void 0:t.length)>0&&(0,w.jsx)(C,{showPDFReportModal:y,setShowPDFReportModal:R,formData:D,cards:t})}),(0,w.jsx)(l.Suspense,{fallback:(0,w.jsx)("div",{children:"Loading..."}),children:A&&(null===t||void 0===t?void 0:t.length)>0&&(0,w.jsx)(V,{showExcelReportModal:A,setShowExcelReportModal:Z,formData:D,cards:t})})]})},E=l.memo(M)}}]);
//# sourceMappingURL=2491.355e5472.chunk.js.map