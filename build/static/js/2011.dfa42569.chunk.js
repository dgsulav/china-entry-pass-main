"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2011],{29801:function(e,t,n){n.d(t,{Mn:function(){return s},My:function(){return a},W2:function(){return i}});var r=n(30577);r.Am.configure();var s=function(e){var t="string"===typeof e?e:"error";r.Am.error(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},a=function(e){var t="string"===typeof e?e:"success";r.Am.success(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},i=function(e){var t="string"===typeof e?e:"success";r.Am.info(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},66495:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(1413),s=n(45987),a=n(72791),i=(n(45803),n(12202)),c=n(16030),o=n(80184),l=["header","setShowModal","types","edit","clearAction","setDeviceId","setRightFingerPrint","setLeftFingerPrint","setStartScan","setStartScanRight","setStartScanLeft"],d=function(e){var t=e.header,n=e.setShowModal,r=(e.types,e.edit,e.clearAction),a=(e.setDeviceId,e.setRightFingerPrint,e.setLeftFingerPrint,e.setStartScan,e.setStartScanRight,e.setStartScanLeft,(0,s.Z)(e,l),(0,c.I0)());return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h5",{className:"modal-title",id:"myExtraLargeModalLabel",children:t}),(0,o.jsx)("div",{children:(0,o.jsx)(i.aHS,{onClick:function(){r&&a(r()),n(!1)},style:{cursor:"pointer"}})})]})})},u=["onModalClick","children","size","id","title","header","showModal","setShowModal","edit","clearAction"],h=function(e){var t=e.onModalClick,n=void 0===t?null:t,i=e.children,l=e.size,h=e.id,m=(e.title,e.header),p=e.showModal,x=e.setShowModal,f=e.edit,v=e.clearAction,j=(0,s.Z)(e,u),g=(0,a.useRef)(),N=((0,c.I0)(),p?"modal display-block":"modal display-none");return(0,a.useEffect)((function(){var e=function(e){"Escape"===e.key&&x(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,o.jsx)("div",{className:N,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",id:h,onClick:n,children:(0,o.jsx)("div",{className:"modal-dialog modal-dialog-centered ".concat(l||""),children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsx)(d,(0,r.Z)({header:m,setShowModal:x,edit:f,clearAction:v},j)),(0,o.jsx)("div",{className:"modal-body",style:{background:"#f4f7fa"},ref:g,children:i})]})})})}},74066:function(e,t,n){n(72791);var r=n(80184);t.Z=function(){return(0,r.jsx)("div",{className:"card w-50 p-5 text-center justify-content-center no-data",children:(0,r.jsx)("h4",{className:"fw-normal mb-3",children:"No data to Display"})})}},90883:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(72791),s=n(80184),a=function(e){var t=e.offset,n=e.limit,a=e.count;return(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)("p",{children:["Showing ",t," to"," ",n>a||0===n?a:n," of ",a," entries"]})})},i=r.memo(a),c=function(e){var t=e.postsPerPage,n=e.totalPosts,r=e.paginate,a=e.handleClick,i=e.currentPage,c=e.maxPageNumberLimit,o=e.minPageNumberLimit,l=[];if(t>0)for(var d=1;d<=Math.ceil(n/t);d++)l.push(d);l.length;return o>=1&&(0,s.jsx)("button",{className:"page-link",onClick:function(){return a("previous")},children:"\u2026"}),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("ul",{className:"pagination pagination-sm justify-content-end",children:[(0,s.jsx)("li",{className:"page-item ",children:(0,s.jsx)("button",{className:"page-link",onClick:function(){return a("previous")},disabled:i===l[0],children:"\xab"})}),l.map((function(e,t){return e<c+1&&e>o?(0,s.jsx)("li",{className:"page-item",children:(0,s.jsx)("button",{onClick:function(){return r(e)},className:"page-link ".concat(t+1===i?"active":null),children:e})},e):null})),(0,s.jsx)("li",{className:"page-item",children:(0,s.jsx)("button",{className:"page-link",onClick:function(){return a("next")},disabled:i===l[l.length-1],children:"\xbb"})})]})})},o=r.memo(c),l=function(e){var t=e.currentPage,n=e.postsPerPage,r=e.count,a=e.paginate,c=e.handleClick,l=e.setCurrentPage,d=e.minPageNumberLimit,u=e.maxPageNumberLimit;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(i,{offset:1+(t-1)*n,limit:n*t,count:r})}),n<r&&(0,s.jsx)("div",{className:"col-6 text-right",children:(0,s.jsx)(o,{postsPerPage:n,totalPosts:r,paginate:a,handleClick:c,currentPage:t,setCurrentPage:l,minPageNumberLimit:d,maxPageNumberLimit:u})})]})})}},537:function(e,t,n){var r=n(72791),s=n(80184),a=function(e){var t=e.postsPerPage,n=e.setPostsPerPage;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("p",{className:"fw-normal p-0 m-0",children:["Show",(0,s.jsxs)("span",{className:"ml-1 mr-1",children:[" ",(0,s.jsxs)("select",{value:t,onChange:function(e){var t=Number(e.target.value);n(t)},children:[(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"20",children:"20"}),(0,s.jsx)("option",{value:"40",children:"40"}),(0,s.jsx)("option",{value:"99999999",children:"All"})]})]})," ","entries"]})})};t.Z=r.memo(a)},12721:function(e,t,n){n(72791);var r=n(84341),s=n(80184);t.Z=function(){return(0,s.jsxs)("div",{className:" w-100 ",children:[(0,s.jsxs)("div",{className:"row ",children:[(0,s.jsx)("div",{className:"col-6 d-flex ",children:(0,s.jsx)(r.ZP,{width:200,height:25})}),(0,s.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,s.jsx)(r.ZP,{width:80,height:30})})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(r.ZP,{height:40}),(0,s.jsx)(r.ZP,{count:10,height:25})]}),(0,s.jsxs)("div",{className:"row d-flex mt-2",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(r.ZP,{width:220,height:20})}),(0,s.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,s.jsx)(r.ZP,{width:200,height:30})})]})]})}},98158:function(e,t,n){n(72791);var r=n(36652),s=n(80184);t.Z=function(e){var t=e.content,n=e.children;return(0,s.jsx)(r.ZP,{content:t,children:n})}},12011:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(70885),s=n(72791),a=n(50645),i=n(15861),c=n(64687),o=n.n(c),l=n(89731),d="/api/v1/application/entry-pass-list",u=function(e){e.postsPerPage;return l.ZP.get("".concat(d,"?limit=0&ordering=card_no&status=rejected&application_type=new"))},h=function(e){return l.ZP.get(e)},m=function(e){return l.ZP.get(e)},p=function(e,t){return l.ZP.get("".concat(d,"?offset=").concat((e-1)*t,"&limit=").concat(t,"&status=rejected&application_type=new"))},x=function(e,t){return l.ZP.get("".concat(d,"?offset=0&limit=").concat(t,"&search=").concat(e,"&status=rejected&application_type=new"))},f=n(65408),v=function(){return{type:f.v.LOADING_REJECTED_REPORT}},j=function(e){return{type:f.v.GET_REJECTED_REPORT_SUCCESS,payload:e}},g=function(e){return{type:f.v.GET_REJECTED_REPORT_FAIL,payload:e}},N=n(29801),b=function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(v()),t.next=4,u({postsPerPage:e});case 4:r=t.sent,s=r.data,n(j(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(g(t.t0)),(0,N.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},P=function(e,t){return function(){var n=(0,i.Z)(o().mark((function n(r){var s,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(v()),n.next=4,x(e,t);case 4:s=n.sent,a=s.data,r(j(a)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(g(n.t0)),(0,N.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},w=n(12721),y=n(537),k=n(16030),C=n(98158),S=n(12202),Z=n(90883),R=n(74066),L=n(80184),M=function(e){var t=e.currentPage,n=e.postsPerPage,a=e.setCurrentPage,c=e.count,l=e.setShowModal,d=e.maxPageNumberLimit,u=e.setMaxPageNumberLimit,x=e.minPageNumberLimit,N=e.setMinPageNumberLimit,b=(e.search,(0,k.v9)((function(e){return e.auth.permissions})),(0,k.v9)((function(e){return e.auth.isAdmin})),(0,k.v9)((function(e){return e.rejectedCard}))),P=b.rejectedCards,w=b.previous,y=b.next,M=(0,k.I0)(),E=(0,s.useState)(5),A=(0,r.Z)(E,1)[0];return(0,L.jsx)(L.Fragment,{children:(null===P||void 0===P?void 0:P.length)>0?(0,L.jsxs)("div",{className:"mt-2",children:[(0,L.jsx)("div",{className:"table-scrollable",children:(0,L.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{scope:"col",style:{width:"2%"},children:"S.N"}),(0,L.jsx)("th",{scope:"col",className:"text-left",children:"Name"}),(0,L.jsx)("th",{scope:"col",className:"text-left",children:"Mobile No"}),(0,L.jsx)("th",{scope:"col",className:"text-left",children:"Citizenship No"}),(0,L.jsx)("th",{scope:"col",className:"text-left",children:"Applied Date"}),(0,L.jsx)("th",{scope:"col",className:"text-left",children:"DOB B.S"}),(0,L.jsx)("th",{scope:"col",className:"text-left",children:"Office"}),(0,L.jsx)("th",{scope:"col",children:"Action"})]})}),(0,L.jsx)("tbody",{children:(null===P||void 0===P?void 0:P.length)>0&&P.map((function(e,r){var s=e.id,a=e.fullName,i=e.mobileNumber,c=e.citizenshipNumber,o=e.createdAtBs,d=e.dobBs,u=e.office;return(0,L.jsxs)("tr",{children:[(0,L.jsxs)("td",{className:"fw-bold",style:{width:"2%"},children:[n*(t-1)+(r+1)," "]}),(0,L.jsx)("td",{className:"text-left",children:a}),(0,L.jsx)("td",{className:"text-left",children:i}),(0,L.jsx)("td",{className:"text-left",children:c}),(0,L.jsx)("td",{className:"text-left",children:o}),(0,L.jsx)("td",{className:"text-left",children:d}),(0,L.jsx)("td",{className:"text-left",children:null===u||void 0===u?void 0:u.name}),(0,L.jsx)("td",{children:(0,L.jsx)(C.Z,{content:"View Details",children:(0,L.jsx)("button",{onClick:function(){return function(e){M({type:f.v.VIEW_DETAIL,payload:e}),l(!0)}(s)},className:"btn btn-md btn-edit btn-primary mx-2",children:(0,L.jsx)(S.dSq,{size:16})})})})]},s)}))})]})}),c>0&&(0,L.jsx)(Z.Z,{currentPage:t,postsPerPage:n,count:c,paginate:function(e){M(function(e){var t=e.number,n=e.postsPerPage;return function(){var e=(0,i.Z)(o().mark((function e(r){var s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(v()),e.next=4,p(t,n);case 4:s=e.sent,a=s.data,r(j(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(g(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({number:e,postsPerPage:n})),a(e)},handleClick:function(e){"previous"===e?(M(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(v()),t.next=4,h(e);case 4:r=t.sent,s=r.data,n(j(s)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(g(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(w)),a((function(e){return e-1})),(t-1)%A===0&&(u(d-A),N(x-A))):"next"===e&&(M(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(v()),t.next=4,m(e);case 4:r=t.sent,s=r.data,n(j(s)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(g(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(y)),a((function(e){return e+1})),t+1>d&&(u(d+A),N(x+A)))},setCurrentPage:a,minPageNumberLimit:x,maxPageNumberLimit:d})]}):(0,L.jsx)(R.Z,{})})},E=function(e){var t=e.rejectedCard,n=(e.setShowModal,t.district),r=t.dob,s=t.dobBs,a=t.email,i=t.fatherName,c=t.fullName,o=t.gender,l=t.isRecommended,d=t.married,u=t.migrated,h=t.mobileNumber,m=t.palika,p=t.province,x=t.spouseName,f=t.submissionNumber,v=t.userPhoto,j=t.wardNumber,g=t.office,N=t.rejectedBy,b=t.remarks;return(0,L.jsxs)("div",{className:"row",children:[(0,L.jsxs)("div",{className:"basic-details col-12 ",children:[(0,L.jsx)("div",{className:"user-img",children:(0,L.jsx)("img",{src:v})}),(0,L.jsxs)("div",{className:"details flex-grow-1",children:[(0,L.jsxs)("div",{className:"full-name",children:[c," "]}),(0,L.jsxs)("div",{children:[f," "]}),(0,L.jsx)("div",{}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Gender: "})," ","m"===o?"Male":"Female"]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Contact: "}),h]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Email: "})," ",a]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:" Address: "}),null===p||void 0===p?void 0:p.name,", ",null===n||void 0===n?void 0:n.name,", ",null===m||void 0===m?void 0:m.name," -",j]})]}),(0,L.jsx)("div",{className:"divider "}),(0,L.jsxs)("div",{className:"details",style:{minWidth:"250px"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"DOB: "})," ",s]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Dob(AD): "}),r]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Father : "})," ",i]}),d&&(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Spouse: "}),x]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Migrated: "})," ",u?"Yes":"No"]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:"Recommended: "})," ",l?"Yes":"No"]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:" Applied Office: "})," ",null===g||void 0===g?void 0:g.name,",",null===g||void 0===g?void 0:g.address]})]}),(0,L.jsx)("div",{className:"d-flex",style:{gap:"5px"},children:(0,L.jsx)("button",{className:"btn btn-danger",readOnly:!0,style:{height:"max-content"},children:"Rejected"})})]}),(0,L.jsx)("div",{className:"basic-details mt-3 col-12 row",children:(0,L.jsxs)("div",{className:"details d-flex flex-column col-12",children:[(0,L.jsxs)("div",{children:["Rejected By: ",null===N||void 0===N?void 0:N.name]}),(0,L.jsxs)("div",{children:["Reason For Being Rejected: ",b]})]})})]})},A=n(66495),I=function(){var e=(0,k.v9)((function(e){return e.rejectedCard})),t=e.count,n=e.loading,i=e.loadingUpdate,c=e.rejectedCards,o=(e.edit,e.rejectedCard),l=(0,k.v9)((function(e){return e.search.search})),d=(0,k.I0)(),u=(0,s.useState)(1),h=(0,r.Z)(u,2),m=h[0],p=h[1],x=(0,s.useState)(5),f=(0,r.Z)(x,2),v=f[0],j=f[1],g=(0,s.useState)(0),N=(0,r.Z)(g,2),C=N[0],S=N[1],Z=(0,s.useState)(10),R=(0,r.Z)(Z,2),I=R[0],T=R[1],_=(0,s.useState)(!1),O=(0,r.Z)(_,2),F=O[0],B=O[1];return(0,s.useEffect)((function(){0===I?d(""===l?b(t):P(l,t)):""===l?(I===a.P||p(1),d(b(I))):(p(1),j(5),S(0),d(P(l,I)))}),[d,I,l]),(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)("div",{className:"user-card",children:[(0,L.jsx)("div",{className:"header-content",children:(0,L.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Rejected Cards Listing"})}),(0,L.jsxs)("div",{className:"".concat((null===c||void 0===c?void 0:c.length)>0?"office-card-body":"card-body"),children:[(0,L.jsx)("div",{className:"row m-0 p-0",children:(null===c||void 0===c?void 0:c.length)>0&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("div",{className:"col-6",children:(0,L.jsx)(y.Z,{postsPerPage:I,setPostsPerPage:T})})})}),n&&(0,L.jsx)(w.Z,{}),i&&(0,L.jsx)(w.Z,{}),!n&&(0,L.jsx)(M,{currentPage:m,setCurrentPage:p,postsPerPage:I,setPostsPerPage:T,count:t,maxPageNumberLimit:v,setMaxPageNumberLimit:j,minPageNumberLimit:C,setMinPageNumberLimit:S,search:l,showModal:F,setShowModal:B})]}),F&&(0,L.jsx)(A.Z,{header:"View Rejected Card",types:"setup",size:"modal-xl",setShowModal:B,showModal:F,children:(0,L.jsx)(E,{setShowModal:B,showModal:F,rejectedCard:o})})]})})}},89731:function(e,t,n){n.d(t,{Yb:function(){return u}});var r=n(15861),s=n(64687),a=n.n(s),i=n(74569),c=n.n(i),o=n(90106),l=n(48044),d=n(30577),u=(c().create({baseURL:"http://chinapass.sushiloli.com.np"}),c().create({baseURL:"http://localhost:9010",headers:{"Content-Type":"application/json"}})),h=c().create({baseURL:"http://chinapass.sushiloli.com.np",headers:{"Content-Type":"application/json"}});h.interceptors.request.use((function(e){if(window.navigator.onLine)return e.headers.Authorization=localStorage.getItem("accessToken")?"Bearer ".concat(localStorage.getItem("accessToken")):null,e.baseURL="http://chinapass.sushiloli.com.np",e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){return e}),function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,s,i,c,u,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.config,401===t.response.status&&"auth/token/refresh"===c.url&&o.h.dispatch({type:l.w.AUTH_ERROR}),"token_not_valid"!==(null===(n=t.response)||void 0===n?void 0:n.data.code)||c._retry){e.next=19;break}return c._retry=!0,e.prev=4,u=JSON.stringify({refresh:localStorage.getItem("refreshToken")}),localStorage.removeItem("accessToken"),e.next=9,h.post("auth/token/refresh",u);case 9:if(200!==(m=e.sent).status){e.next=14;break}return localStorage.setItem("accessToken",null===m||void 0===m?void 0:m.data.access),c.headers.Authorization="Bearer ".concat(null===m||void 0===m?void 0:m.data.access),e.abrupt("return",h(c));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),o.h.dispatch({type:l.w.AUTH_ERROR});case 19:if("No Internet"===t&&d.Am.error("No Internet Connection !!!"),"Network Error"===t.message&&d.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),500===(null===(r=t.response)||void 0===r?void 0:r.status)&&d.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),404===(null===(s=t.response)||void 0===s?void 0:s.status)&&d.Am.error("Page Not Found !!!!!",{autoClose:1200}),401!==(null===(i=t.response)||void 0===i?void 0:i.status)&&"Invalid token specified"!==t.message){e.next=26;break}return o.h.dispatch({type:l.w.AUTH_ERROR}),e.abrupt("return",Promise.reject(t.response.data.detail));case 26:if(!(t.response&&t.response.status>=400&&t.response.status<500)){e.next=33;break}if(!t.response.data.detail){e.next=32;break}return e.abrupt("return",Promise.reject("".concat(t.response.data.detail)));case 32:return e.abrupt("return",Promise.reject("".concat(t.response.statusText)));case 33:return e.abrupt("return",Promise.reject(t));case 34:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),t.ZP=h},50645:function(e,t,n){n.d(t,{P:function(){return r}});var r=10}}]);
//# sourceMappingURL=2011.dfa42569.chunk.js.map