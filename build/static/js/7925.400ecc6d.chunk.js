"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7925],{25922:function(e,n,t){t.d(n,{EQ:function(){return s},ir:function(){return r},mt:function(){return i},od:function(){return a}});var r=[{id:"immigration",name:"Immigration Office"},{id:"dao",name:"District Administration Office"}],a=[{id:"m",name:"Male"},{id:"f",name:"Female"},{id:"o",name:"Other"}],s=[{id:"pending",name:"PENDING"},{id:"verified",name:"VERIFIED"},{id:"rejected",name:"REJECTED"},{id:"approved",name:"APPROVED"},{id:"printed",name:"PRINTED"}],i=[{id:"pending",name:"PENDING"},{id:"approved",name:"APPROVED"},{id:"printed",name:"PRINTED"}]},66096:function(e,n,t){t(72791);var r=t(84341),a=t(80184);n.Z=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(r.ZP,{height:40}),(0,a.jsx)(r.ZP,{count:10,height:25})]}),(0,a.jsxs)("div",{className:"row d-flex mt-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(r.ZP,{width:220,height:20})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:200,height:30})})]})]})}},28180:function(e,n,t){t(72791);var r=t(80184);n.Z=function(e){var n=e.thumb,t=e.height,a=e.width,s=e.onClick;return(0,r.jsx)("img",{src:n,alt:n,className:"img-thumbnail mt-1",height:t||70,width:a||70,onClick:s})}},32194:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});var r=t(70885),a=t(72791),s=t(16030),i=t(12721),o=t(1413),c=t(15861),l=t(64687),d=t.n(l),u=t(79814),m=t(88038),p=function(){return{type:m.A.LOADING_USER}},h=function(e){return{type:m.A.GET_USER_SUCCESS,payload:e}},f=function(e){return{type:m.A.GET_USER_FAIL,payload:e}},v=function(e){return{type:m.A.CREATE_USER_SUCCESS,payload:e}},x=function(e){return{type:m.A.CHANGE_USER_PASSWORD_SUCCESS,payload:e}},g=t(29801);function N(e){this.message=e}N.prototype=new Error,N.prototype.name="InvalidCharacterError";"undefined"!=typeof window&&window.atob&&window.atob.bind(window);function j(e){this.message=e}j.prototype=new Error,j.prototype.name="InvalidTokenError";var w=function(e){return function(){var n=(0,c.Z)(d().mark((function n(t){var r,a,s;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(p()),n.next=4,u.PR(e);case 4:r=n.sent,a=r.data,s=a.data.filter((function(e){return!1===e.isAdmin})),t(h((0,o.Z)((0,o.Z)({},a),{},{results:s}))),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),t(f(n.t0)),(0,g.Mn)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e){var n=e.number,t=e.postsPerPage;return function(){var e=(0,c.Z)(d().mark((function e(r){var a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(p()),e.next=4,u.Rv(n,t);case 4:a=e.sent,s=a.data,r(h(s)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(f(e.t0)),(0,g.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()},P=function(e,n){return function(){var t=(0,c.Z)(d().mark((function t(r){var a,s,i,o,c,l,h,f,x,N,j,w,P,y,Z,k,C,A,S;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.firstName,s=e.middleName,i=e.lastName,o=e.email,c=e.username,l=e.office,h=e.gender,f=e.password,x=e.confirmPassword,N=e.isActive,j=e.isChecker,w=e.userPhoto,P=e.phone,y=e.signature,Z=e.designation,k=e.groups,t.prev=1,(C=new FormData).append("firstName",a),C.append("middleName",s),C.append("lastName",i),C.append("email",o),C.append("username",c),C.append("office ",l),C.append("phone",P),C.append("gender",h),C.append("password",f),C.append("confirmPassword",x),t.next=15,k.forEach((function(e,n){C.append("groups[".concat(n,"]"),e)}));case 15:return C.append("signature",y),C.append("designation ",Z),C.append("isActive",N),C.append("isChecker",j),w&&C.append("userPhoto",w),r(p()),t.next=23,u.r4(C);case 23:return A=t.sent,S=A.data,(0,g.My)("User created successfully "),r(v(S)),r(b({number:n,postsPerPage:10})),t.abrupt("return",!0);case 31:t.prev=31,t.t0=t.catch(1),r((d=t.t0,{type:m.A.CREATE_USER_FAIL,payload:d})),(0,g.Mn)(t.t0);case 35:case"end":return t.stop()}var d}),t,null,[[1,31]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e,n,t,r){return function(){var a=(0,c.Z)(d().mark((function a(s){var i,o,c,l,h,f,v,x,N,j,w,P,y,Z,k,C;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=n.firstName,o=n.middleName,c=n.lastName,l=n.email,h=n.username,f=n.office,v=n.gender,x=n.remarks,N=n.isActive,j=n.isChecker,w=n.userPhoto,P=n.phone,y=n.signature,Z=n.designation,k=n.groups,a.prev=1,s({type:m.A.LOADING_UPDATED}),(C=new FormData).append("firstName",i),C.append("middleName",o),C.append("lastName",c),C.append("email",l),C.append("phone",P),C.append("username",h),C.append("office ",f),C.append("gender",v),a.next=14,k.forEach((function(e,n){C.append("groups[".concat(n,"]"),e)}));case 14:return""===y||null!==y&&void 0!==y&&y.includes("data:image/png;base64,")?C.append("signature",""):C.append("signature",y),C.append("isActive",N),C.append("isChecker",j),C.append("designation",Z),C.append("remarks",x),w&&C.append("userPhoto",w),s(p()),a.next=23,u.Nq(e,C);case 23:return(0,g.My)("User Updated Successfully "),s(b({number:t,postsPerPage:r})),a.abrupt("return",!0);case 28:a.prev=28,a.t0=a.catch(1),s((d=a.t0,{type:m.A.UPDATE_USER_FAIL,payload:d})),(0,g.Mn)(a.t0);case 32:case"end":return a.stop()}var d}),a,null,[[1,28]])})));return function(e){return a.apply(this,arguments)}}()},Z=function(e,n){return function(){var t=(0,c.Z)(d().mark((function t(r){var a,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(p()),t.next=4,u.o1(e,n);case 4:a=t.sent,s=a.data,r(h(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),r(f(t.t0)),(0,g.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},k=function(){return function(){var e=(0,c.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:m.A.CLEAR_USER}),e.abrupt("return",!0);case 5:e.prev=5,e.t0=e.catch(0),(0,g.Mn)(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}()},C=t(12202),A=t(12942),S=t(28931),E=t(66495),F=t(81829),_=t(90883),M=t(93969),U=t(98158),R=t(65804),q=t(94924),O=t(92506),L=t(76863),I=(t(7623),t(80184)),D=function(e){var n=e.passwordChangeId,t=(0,s.I0)(),i=(0,S.k6)(),o=(0,a.useState)("password"),l=(0,r.Z)(o,2),h=(l[0],l[1],(0,a.useState)("password")),f=(0,r.Z)(h,2),v=f[0],N=f[1],j=(0,a.useState)("password"),w=(0,r.Z)(j,2),b=w[0],P=w[1],y=L.Ry().shape({password:L.Z_().required("Please Enter your password").matches(/^(?=.*[a-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,}$/,"Must Contain 6 Characters, One alphabet and One Number "),confirm_password:L.Z_().required("Password is required").oneOf([L.iH("password"),null],"Passwords must match")}),Z=function(){N("password"===v?"text":"password")},k=function(){P("password"===b?"text":"password")};return(0,I.jsx)("div",{className:"",children:(0,I.jsx)("div",{className:"account-pages my-5",children:(0,I.jsx)("div",{className:"container",children:(0,I.jsx)("div",{className:"row justify-content-center ",children:(0,I.jsx)("div",{className:"col-md-8 col-lg-6 col-xl-5",children:(0,I.jsxs)("div",{className:"card overflow-hidden card-reset",children:[(0,I.jsx)("div",{className:"bg-primary bg-soft",children:(0,I.jsx)("div",{className:"row",children:(0,I.jsx)("div",{className:"col-sm-12",children:(0,I.jsx)("div",{className:"text-center m-3",children:(0,I.jsx)("h5",{children:"Change password"})})})})}),(0,I.jsx)("div",{className:"card-body pt-0",children:(0,I.jsx)("div",{className:"w-100",children:(0,I.jsx)(O.J9,{initialValues:{password:"",confirm_password:""},validationSchema:y,onSubmit:function(e){var r=e.password;t(function(e,n,t){return function(){var r=(0,c.Z)(d().mark((function r(a){var s,i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(p()),r.next=4,u.oi(e,n);case 4:s=r.sent,i=s.data,a(x(i)),(0,g.My)("Password changed successfully"),t.push("/user"),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),a((o=r.t0,{type:m.A.CHANGE_USER_PASSWORD_FAIL,payload:o})),(0,g.Mn)("Failed to change password");case 15:case"end":return r.stop()}var o}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(n,r,i))},children:function(e){return(0,I.jsxs)(O.l0,{autoComplete:"off",className:"form-horizontal ",children:[(0,I.jsxs)("div",{className:"mb-3  password-field",children:[(0,I.jsx)("label",{htmlFor:"password",className:"form-label ",children:"New Password"}),(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,I.jsx)(O.gN,{type:b,className:"form-control change-textfield ",name:"password",placeholder:"New Password"}),(0,I.jsx)("span",{onClick:k,children:"password"===b?(0,I.jsx)(R.cqT,{}):(0,I.jsx)(R.rnh,{})})]}),(0,I.jsx)(O.Bc,{name:"password",component:q.Z})]}),(0,I.jsxs)("div",{className:"mb-3  password-field",children:[(0,I.jsx)("label",{htmlFor:"confirm-password",className:"form-label ",children:"Confirm Password"}),(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,I.jsx)(O.gN,{type:v,className:"form-control change-textfield ",name:"confirm_password",placeholder:"Confirm Password"}),(0,I.jsx)("span",{onClick:Z,children:"password"===v?(0,I.jsx)(R.cqT,{}):(0,I.jsx)(R.rnh,{})})]}),(0,I.jsx)(O.Bc,{name:"confirm_password",component:q.Z})]}),(0,I.jsx)("div",{className:"mt-3 d-grid text-center",children:(0,I.jsx)("button",{className:"btn btn-primary waves-effect waves-light mt-4 m-3",type:"submit",children:"Save Changes"})})]})}})})})]})})})})})})},T=function(e){var n=e.currentPage,t=e.postsPerPage,i=e.setCurrentPage,l=e.count,v=e.setShowModal,x=e.maxPageNumberLimit,N=e.setMaxPageNumberLimit,j=e.minPageNumberLimit,w=e.setMinPageNumberLimit,P=e.search,y=((0,S.k6)(),(0,s.v9)((function(e){return e.auth.permissions}))),Z=(0,s.v9)((function(e){return e.auth.isAdmin})),k=(0,s.v9)((function(e){return e.auth.isSuperuser})),R=(0,s.v9)((function(e){return e.user.users})),q=(0,s.v9)((function(e){return e.user.next})),O=(0,s.v9)((function(e){return e.user.previous})),L=(0,s.I0)(),T=(0,a.useState)(5),B=(0,r.Z)(T,1)[0],z=(0,a.useState)(!1),V=(0,r.Z)(z,2),G=V[0],$=V[1],H=(0,a.useState)(""),X=(0,r.Z)(H,2),J=X[0],Q=X[1],W=(null===y||void 0===y?void 0:y.includes("add_user"))||Z||k;return(0,I.jsxs)(I.Fragment,{children:[(null===R||void 0===R?void 0:R.length)>0?(0,I.jsxs)("div",{className:"mt-2",children:[(0,I.jsx)("div",{className:"table-scrollable",children:(0,I.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{scope:"col",style:{width:"2%"},children:"S.N"}),(0,I.jsx)("th",{scope:"col",className:"text-left",children:"Username"}),(0,I.jsx)("th",{scope:"col",className:"text-left",children:"Name"}),(0,I.jsx)("th",{scope:"col",className:"text-left",children:"Email"}),(0,I.jsx)("th",{scope:"col",className:"text-left",children:"Office"}),(0,I.jsx)("th",{scope:"col",children:"Gender"}),(0,I.jsx)("th",{scope:"col",children:"Role"}),(0,I.jsx)("th",{scope:"col",children:"Status"}),(0,I.jsx)("th",{scope:"col",children:"Action"})]})}),(0,I.jsx)("tbody",{children:(null===R||void 0===R?void 0:R.length)>0&&R.map((function(e,r){var a=e.id,s=e.username,i=e.fullName,o=e.office,c=e.email,l=e.isActive,d=e.gender,u=e.groups,p=e.isAdmin,h=e.isSuperuser;return(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{scope:"row",style:{width:"2%"},children:t*(n-1)+(r+1)}),(0,I.jsx)("td",{className:"text-left",children:""!==s?s:"N/A"}),(0,I.jsx)("td",{className:"text-left",children:""!==i?i:"N/A"}),(0,I.jsx)("td",{className:"text-left",style:{wordBreak:"break-all"},children:c}),(0,I.jsx)("td",{className:"text-left",children:o?null===o||void 0===o?void 0:o.name:"N/A"}),(0,I.jsx)("td",{children:(0,I.jsx)("span",{className:"badge badge-success",children:"m"===d?"Male":"f"===d?"Female":"Other"})}),(0,I.jsx)("td",{children:u.length>0?u.map((function(e,n){return(0,I.jsx)("span",{className:"badge badge-success ml-1",children:e.role},n)})):"N/A"}),(0,I.jsx)("td",{children:(0,I.jsx)(M.Z,{active:l})}),(0,I.jsxs)("td",{children:[(h||p)&&"N/A",!h&&!p&&(0,I.jsx)(U.Z,{content:"Edit",children:(0,I.jsx)("button",{className:"btn btn-md btn-edit btn-primary mx-1",onClick:function(){return function(e,n){L({type:m.A.USER_EDIT_SUCCESS,payload:e,postsPerPage:n}),v(!0)}(a)},children:(0,I.jsx)(C.fmQ,{size:16})})}),!p&&!h&&(0,I.jsx)(U.Z,{content:"Change Password",children:(0,I.jsx)("button",{className:"btn btn-md btn-edit btn-primary mx-1",onClick:function(){return function(e){Q(e),$(!0)}(a)},children:(0,I.jsx)(A.xuE,{size:16})})})]})]},a)}))})]})}),l>0&&(0,I.jsx)(_.Z,{currentPage:n,postsPerPage:t,count:l,paginate:function(e){L(b({number:e,postsPerPage:t})),i(e)},handleClick:function(e){"previous"===e?(L(function(e){return function(){var n=(0,c.Z)(d().mark((function n(t){var r,a,s;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(p()),n.next=4,u.TI(e);case 4:r=n.sent,a=r.data,s=a.data.filter((function(e){return!1===e.isAdmin})),t(h((0,o.Z)((0,o.Z)({},a),{},{results:s}))),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),t(f(n.t0)),(0,g.Mn)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(O)),i((function(e){return e-1})),(n-1)%B===0&&(N(x-B),w(j-B))):"next"===e&&(L(function(e){return function(){var n=(0,c.Z)(d().mark((function n(t){var r,a,s;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(p()),n.next=4,u.hj(e);case 4:r=n.sent,a=r.data,s=a.data.filter((function(e){return!1===e.isAdmin})),t(h((0,o.Z)((0,o.Z)({},a),{},{results:s}))),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),t(f(n.t0)),(0,g.Mn)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(q)),i((function(e){return e+1})),n+1>x&&(N(x+B),w(j+B)))},setCurrentPage:i,minPageNumberLimit:j,maxPageNumberLimit:x})]}):(0,I.jsx)(F.Z,{search:P,onClick:function(){return v(!0)},addPermission:W}),G&&(0,I.jsx)(E.Z,{header:"Update Password",types:"user",size:"modal-xl",setShowModal:$,showModal:G,children:(0,I.jsx)(D,{passwordChangeId:J})})]})},B=a.memo(T),z=t(50645),V=t(537),G=(t(66096),t(31274)),$=t(29815),H=t(87273),X=t(2557),J=t(25922),Q=t(28180),W=t(89731),K=function(){var e=(0,c.Z)(d().mark((function e(n,t,r){var a,s,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.limit,s=r.offset,e.next=3,(0,W.ZP)("api/v1/core-app/office/list?search=".concat(n,"&offset=").concat(s,"&limit=").concat(a));case 3:return i=e.sent,o=i.data,e.abrupt("return",{options:o.data,hasMore:!!o.data.next,additional:{offset:a,limit:a+10}});case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Y=function(){var e=(0,c.Z)(d().mark((function e(n,t,r){var a,s,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.limit,s=r.offset,e.next=3,(0,W.ZP)("auth/groups/list?search=".concat(n,"&offset=").concat(s,"&limit=").concat(a,"&is_active=true"));case 3:return i=e.sent,o=i.data,e.abrupt("return",{options:o.data,hasMore:o.data.count>a,additional:{offset:a,limit:a+10}});case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),ee=(t(16587),function(e){var n=e.currentPage,t=e.setShowModal,i=e.postsPerPage,o=(0,s.v9)((function(e){return e.auth.isAdmin})),l=(0,s.v9)((function(e){return e.auth.isSuperuser})),u=(0,s.v9)((function(e){return e.user.loadingUpdated})),m=(0,s.v9)((function(e){return e.user.loading})),p=(0,s.v9)((function(e){return e.user.user})),h=(0,s.v9)((function(e){return e.user.edit})),f=(0,s.I0)(),v=(0,a.useState)("password"),x=(0,r.Z)(v,2),N=x[0],j=x[1],w=(0,a.useState)("password"),b=(0,r.Z)(w,2),Z=b[0],k=b[1],C=(0,a.useState)(null),A=(0,r.Z)(C,2),S=A[0],E=A[1],F={firstName:h?null===p||void 0===p?void 0:p.firstName:"",middleName:h?null===p||void 0===p?void 0:p.middleName:"",lastName:h?null===p||void 0===p?void 0:p.lastName:"",email:h?null===p||void 0===p?void 0:p.email:"",username:h?null===p||void 0===p?void 0:p.username:"",office:h?null===p||void 0===p?void 0:p.office:"",phone:h?null===p||void 0===p?void 0:p.phone:"",designation:h?null===p||void 0===p?void 0:p.designation:"",signature:h?null===p||void 0===p?void 0:p.signature:"",userPhoto:"",password:"",confirmPassword:"",gender:h?J.od.find((function(e){return e.id===(null===p||void 0===p?void 0:p.gender)})):"",remarks:"",isActive:!h||(null===p||void 0===p?void 0:p.isActive),isChecker:!!h&&(null===p||void 0===p?void 0:p.isChecker),groups:h?null===p||void 0===p?void 0:p.groups:[]},_=L.Ry().shape({firstName:L.Z_().required("First Name required").min(2,"First name must be at least 2 characters.").max(50,"First name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"First name should only contain alphabet."),middleName:L.Z_().max(50,"Middle name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Middle name should only contain alphabet."),lastName:L.Z_().required("Last Name required").min(2,"Last name must be at least 2 characters.").max(50,"Last name should be 50 characters.").matches(/(?=.*^[A-Za-z]\w).*$/,"Last name should only contain alphabet."),username:L.Z_().required("Username is required.").min(4,"Username must be at least 4 characters.").max(50,"Username should be 50 characters.").matches(/(?=.*^[A-Za-z_]\w).*$/,"Username should begin with _ or alphabet."),password:!h&&L.Z_().required("Required.").min(6,"Password must be at least 6 characters.").matches(/^(?=.*[a-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,}$/,"Must Contain 6 Characters, One alphabet and One Number "),confirmPassword:!h&&L.Z_().required("Required.").oneOf([L.iH("password"),null],"Passwords must match."),email:L.Z_().email("@ is required").required("Required."),office:L.Ry().typeError("Office is required").required("Office is required"),phone:L.Z_().required("Mobile Number").matches(/^[9]\d{9}$/,"Mobile number should start with 98 and should be 10 digits."),designation:L.Z_().required("Designation Required"),gender:L.Ry().typeError("Gender is required").required("Gender is required"),isActive:L.Xg(),isChecker:L.Xg(),remarks:L.Z_()}),M=function(){var e=(0,c.Z)(d().mark((function e(r){var a,s,o,c,l,u,m,v,x,g,N,j,w,b,Z,k,C,A,S,F,_,M;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.firstName,s=r.middleName,o=r.lastName,c=r.email,l=r.username,u=r.phone,m=r.office,v=r.gender,x=r.remarks,g=r.password,N=r.groups,j=r.confirmPassword,w=r.designation,b=r.userPhoto,Z=r.isActive,k=r.isChecker,C=(null===a||void 0===a?void 0:a.charAt(0).toUpperCase())+(null===a||void 0===a?void 0:a.slice(1)),A=(null===s||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===s||void 0===s?void 0:s.slice(1)),S=(null===o||void 0===o?void 0:o.charAt(0).toUpperCase())+(null===o||void 0===o?void 0:o.slice(1)),F=null===N||void 0===N?void 0:N.map((function(e){return e.id})),!h){e.next=14;break}return _=p.id,M={firstName:C,middleName:A,lastName:S,email:c,username:(null===l||void 0===l?void 0:l.charAt(0).toLowerCase())+(null===l||void 0===l?void 0:l.slice(1)),gender:""!==v?null===v||void 0===v?void 0:v.id:"",office:m?null===m||void 0===m?void 0:m.id:null,designation:w,groups:F,phone:u,userPhoto:b,isActive:Z,isChecker:k,remarks:x},e.next=10,f(y(_,M,n,i));case 10:e.sent?(E(null),t(!1)):t(!0),e.next=18;break;case 14:return e.next=16,f(P({firstName:C,middleName:A,lastName:S,email:c,username:(null===l||void 0===l?void 0:l.charAt(0).toLowerCase())+(null===l||void 0===l?void 0:l.slice(1)),gender:""!==v?null===v||void 0===v?void 0:v.id:"",office:m?null===m||void 0===m?void 0:m.id:null,groups:F,phone:u,isActive:Z,isChecker:k,password:g,designation:w,confirmPassword:j,userPhoto:b,remarks:x},n));case 16:e.sent?(E(null),t(!1)):t(!0);case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,c.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||n.target.value===(null===p||void 0===p?void 0:p.username)){e.next=6;break}if(!n.target.value.trim()||""===n.target.value){e.next=6;break}return e.next=4,(0,H.k)(n);case 4:e.sent&&(0,g.Mn)("User name with this  is already added. ");case 6:if(!n.target.value.trim()||""===n.target.value){e.next=11;break}return e.next=9,(0,H.k)(n);case 9:e.sent&&(0,g.Mn)("User with this name is already added ");case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(){j("password"===N?"text":"password")},T=function(){k("password"===Z?"text":"password")};return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:"row justify-content-center mt-3",children:(0,I.jsx)("div",{className:"col-12",children:(0,I.jsx)("div",{className:"registration-process ",children:(0,I.jsx)(O.J9,{initialValues:F,validationSchema:_,onSubmit:M,children:function(e){var n=e.setFieldValue;return(0,I.jsxs)(O.l0,{autoComplete:"off",children:[(0,I.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,I.jsxs)("div",{className:" col-4",children:[(0,I.jsxs)("label",{htmlFor:"firstName",className:"fw-bold float-start",children:["First Name"," ",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)(O.gN,{type:"text",name:"firstName",className:"form-control ",placeholder:"First Name"}),(0,I.jsx)(O.Bc,{name:"firstName",component:q.Z})]}),(0,I.jsxs)("div",{className:" col-4",children:[(0,I.jsx)("label",{htmlFor:"middleName",className:"fw-bold float-start",children:"Middle Name"}),(0,I.jsx)(O.gN,{type:"text",name:"middleName",className:"form-control ",placeholder:"Middle Name"}),(0,I.jsx)(O.Bc,{name:"middleName",component:q.Z})]}),(0,I.jsxs)("div",{className:" col-4",children:[(0,I.jsxs)("label",{htmlFor:"lastName",className:"fw-bold float-start",children:["Last Name"," ",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)(O.gN,{type:"text",name:"lastName",className:"form-control ",placeholder:"Last Name"}),(0,I.jsx)(O.Bc,{name:"lastName",component:q.Z})]})]}),(0,I.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,I.jsxs)("div",{className:" col-4",children:[(0,I.jsxs)("label",{htmlFor:"email",className:"fw-bold float-start",children:["Email",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)(O.gN,{type:"email",name:"email",className:"form-control ",placeholder:"Email"}),(0,I.jsx)(O.Bc,{name:"email",component:q.Z})]}),(0,I.jsxs)("div",{className:" col-4",children:[(0,I.jsxs)("label",{htmlFor:"office ",className:"fw-bold float-start",children:["Office",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)($.n9,{blurInputOnSelect:!0,value:e.values.office,isClearable:"true",isSearchable:"true",name:"office",isDisabled:h&&!(o||l),getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(e){n("office",e)},loadOptions:K,additional:{offset:0,limit:0},styles:{border:"white"}}),(0,I.jsx)(O.Bc,{name:"office",component:q.Z})]}),(0,I.jsxs)("div",{className:" col-4",children:[(0,I.jsxs)("label",{htmlFor:"phone",className:"fw-bold float-start",children:["Phone",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)(O.gN,{type:"text",name:"phone",value:e.values.phone,className:"form-control ",placeholder:"Mobile No",onChange:function(n){e.setFieldValue("phone",n.target.value)}}),(0,I.jsx)(O.Bc,{name:"phone",component:q.Z})]})]}),(0,I.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,I.jsxs)("div",{className:"col-4",children:[(0,I.jsxs)("label",{htmlFor:"designation",className:"fw-bold float-start",children:["Designation",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)(O.gN,{type:"text",name:"designation",className:"form-control ",placeholder:"Designation"}),(0,I.jsx)(O.Bc,{name:"designation",component:q.Z})]}),(0,I.jsxs)("div",{className:"col-4",children:[(0,I.jsx)("label",{htmlFor:"gender",className:"fw-bold ",children:"Gender"}),(0,I.jsx)(G.ZP,{value:e.values.gender,isClearable:"true",isSearchable:"true",name:"gender",getOptionLabel:function(e){return"".concat(null===e||void 0===e?void 0:e.name," ")},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},options:J.od,onChange:function(n){e.setFieldValue("gender",n)}}),(0,I.jsx)(O.Bc,{name:"gender",component:q.Z})]}),(0,I.jsxs)("div",{className:" col-4 ",children:[(0,I.jsx)("label",{htmlFor:"userPhoto",className:"fw-bold float-start",children:"Photo"}),(0,I.jsx)("input",{type:"file",name:"userPhoto",className:"form-control",onChange:function(n){e.setFieldValue("userPhoto",n.target.files[0]);var t=new FileReader;t.readAsDataURL(n.target.files[0]),t.onloadend=function(){return E([t.result])}}}),S&&(0,I.jsx)(Q.Z,{thumb:S}),p&&p.userPhoto&&!S&&(0,I.jsx)(Q.Z,{thumb:p.userPhoto}),(0,I.jsx)(O.Bc,{name:"userPhoto",component:q.Z})]})]}),(0,I.jsxs)("div",{className:"form-group row mb-2 justify-content-center",children:[(0,I.jsxs)("div",{className:"col-4",children:[(0,I.jsxs)("label",{htmlFor:"username",className:"fw-bold float-start",children:["User Name (Case Insensitive)",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsx)(O.gN,{type:"text",name:"username",className:"form-control ",placeholder:"Username",onChange:function(n){var t=(n.target.value||"").replace(/\s+/gi,"");e.setFieldValue("username",t),U(n)}}),(0,I.jsx)(O.Bc,{name:"username",component:q.Z})]}),!h&&(0,I.jsxs)(I.Fragment,{children:[" ",(0,I.jsxs)("div",{className:"col-4 password-field",children:[(0,I.jsxs)("label",{htmlFor:"password",className:"fw-bold float-start",children:["Password",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,I.jsx)(O.gN,{type:N,name:"password",className:"form-control",placeholder:"Password"}),(0,I.jsx)("span",{onClick:D,children:"password"===N?(0,I.jsx)(R.cqT,{}):(0,I.jsx)(R.rnh,{})})]}),(0,I.jsx)(O.Bc,{name:"password",component:q.Z})]}),(0,I.jsxs)("div",{className:"col-4 password-field",children:[(0,I.jsxs)("label",{htmlFor:"confirmPassword",className:"fw-bold float-start",children:["Confirm Password",(0,I.jsx)("strong",{className:"text-danger ml-1",children:"*"})]}),(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,I.jsx)(O.gN,{type:Z,name:"confirmPassword",className:"form-control",placeholder:"Confirm Password"}),(0,I.jsx)("span",{onClick:T,children:"password"===Z?(0,I.jsx)(R.cqT,{}):(0,I.jsx)(R.rnh,{})})]}),(0,I.jsx)(O.Bc,{name:"confirmPassword",component:q.Z})]})]})]}),(0,I.jsx)("div",{className:"form-group row mb-2 justify-content-center",children:(0,I.jsxs)("div",{className:" col-12",children:[(0,I.jsx)("label",{htmlFor:"groups",className:"fw-bold float-start",children:"Role"}),(0,I.jsx)($.n9,{blurInputOnSelect:!0,value:e.values.groups,isClearable:"true",isSearchable:"true",name:"groups",inputId:"input",isMulti:!0,getOptionLabel:function(e){return"".concat(e.role||e.name)},getOptionValue:function(e){return"".concat(null===e||void 0===e?void 0:e.id)},onChange:function(e){n("groups",e)},loadOptions:Y,additional:{offset:0,limit:10},styles:{border:"white"}}),(0,I.jsx)(O.Bc,{name:"groups",component:q.Z})]})}),(0,I.jsx)("div",{className:"d-flex justify-content-center my-4",children:(0,I.jsxs)("div",{className:" text-center",children:[(0,I.jsx)(O.gN,{type:"checkbox",name:"isActive",id:"isActive",className:"filled-in chk-col-blue"}),(0,I.jsxs)("label",{htmlFor:"isActive",className:"fw-bold  mx-2",children:[" ","Active"]})]})}),(0,I.jsx)("div",{className:"form-group text-center",children:(0,I.jsx)(X.Z,{type:"submit",className:"btn btn-primary",loading:m||u,disabled:m||u,title:h?"Update":"Create",content:"Add"})})]})}})})})})})}),ne=a.memo(ee),te=function(){var e=(0,s.v9)((function(e){return e.auth.permissions})),n=(0,s.v9)((function(e){return e.auth.isAdmin})),t=(0,s.v9)((function(e){return e.auth.isSuperuser})),o=(0,s.v9)((function(e){return e.user})),c=o.users,l=o.edit,d=o.loading,u=o.count,m=(0,s.v9)((function(e){return e.user.loadingUpdated})),p=(0,s.v9)((function(e){return e.search.search})),h=(0,s.I0)(),f=(0,a.useState)(!1),v=(0,r.Z)(f,2),x=v[0],g=v[1],N=(0,a.useState)(1),j=(0,r.Z)(N,2),b=j[0],P=j[1],y=(0,a.useState)(5),A=(0,r.Z)(y,2),S=A[0],F=A[1],_=(0,a.useState)(0),M=(0,r.Z)(_,2),R=M[0],q=M[1],O=(0,a.useState)(10),L=(0,r.Z)(O,2),D=L[0],T=L[1];(0,a.useEffect)((function(){0===D?h(""===p?w(u):Z(p,u)):""===p?(D===z.P||P(1),h(w(D))):(P(1),F(5),q(0),h(Z(p,D)))}),[h,D,p]);var G=e.includes("can_create_user")||n||t;return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{className:"user-card",style:{backgroundColor:"white"},children:[(0,I.jsx)("div",{className:"header-content",children:(0,I.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Users Listing"})}),(0,I.jsxs)("div",{className:"".concat((null===c||void 0===c?void 0:c.length)>0?"office-card-body":"card-body"),children:[(0,I.jsx)("div",{className:"row m-0 p-0",children:(null===c||void 0===c?void 0:c.length)>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"col-6",children:(0,I.jsx)(V.Z,{postsPerPage:D,setPostsPerPage:T})}),(0,I.jsx)("div",{className:"col-6 text-right",children:G&&(0,I.jsx)(U.Z,{content:"Add",children:(0,I.jsxs)("button",{type:"button",className:"btn btn-primary waves-effect waves-light btn-sm float-end",onClick:function(){return g(!0)},children:[(0,I.jsx)(C.wEH,{className:"mb-1"}),"\xa0Add New"]})})})]})}),d&&(0,I.jsx)(i.Z,{}),!d&&!m&&(0,I.jsx)(B,{currentPage:b,setCurrentPage:P,postsPerPage:D,setPostsPerPage:T,count:u,maxPageNumberLimit:S,setMaxPageNumberLimit:F,minPageNumberLimit:R,setMinPageNumberLimit:q,search:p,setShowModal:g}),x&&(0,I.jsx)(E.Z,{header:l?"Edit User":"User",types:"user",size:"modal-xl",setShowModal:g,showModal:x,edit:l,clearAction:k,children:(0,I.jsx)(ne,{setShowModal:g,showModal:x,edit:l,currentPage:b,postsPerPage:D})})]})]})})}},79814:function(e,n,t){t.d(n,{Nq:function(){return l},PR:function(){return a},Rv:function(){return o},TI:function(){return s},hj:function(){return i},o1:function(){return d},oi:function(){return m},pX:function(){return u},r4:function(){return c}});var r=t(89731),a=function(e){return r.ZP.get("api/v1/core-app/users/list?offset=0&limit=".concat(e,"&ordering=-id"))},s=function(e){return r.ZP.get(e)},i=function(e){return r.ZP.get(e)},o=function(e,n){return r.ZP.get("api/v1/core-app/users/list?offset=".concat((e-1)*n,"&limit=").concat(n,"&ordering=-id"))},c=function(e){return r.ZP.post("api/v1/core-app/user",e)},l=function(e,n){return r.ZP.patch("api/v1/core-app/user/".concat(e),n)},d=function(e,n){return r.ZP.get("api/v1/core-app/users/list?offset=0&limit=".concat(n,"&search=").concat(e))},u=function(e,n){return r.ZP.get("api/v1/core-app/users/list?username=".concat(e.target.value.trim()),{cancelToken:n.token})},m=function(e,n){return r.ZP.patch("/auth/change-password/".concat(e),{password:n})}},87273:function(e,n,t){t.d(n,{k:function(){return d}});var r,a=t(15861),s=t(64687),i=t.n(s),o=t(74569),c=t.n(o),l=t(79814),d=function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"!==typeof r&&r.cancel("Operation canceled due to new request."),r=c().CancelToken.source(),e.prev=2,e.next=5,(0,l.pX)(n,r);case 5:if(t=e.sent,!((a=t.data).data.length>0)){e.next=9;break}return e.abrupt("return",!0);case 9:if(!(a.data.length<=0)){e.next=11;break}return e.abrupt("return",!1);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(2);case 15:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(n){return e.apply(this,arguments)}}()},7623:function(){}}]);
//# sourceMappingURL=7925.400ecc6d.chunk.js.map