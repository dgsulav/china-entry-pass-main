"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[829],{29801:function(e,t,n){n.d(t,{Mn:function(){return a},My:function(){return s},W2:function(){return i}});var r=n(30577);r.Am.configure();var a=function(e){var t="string"===typeof e?e:"error";r.Am.error(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},s=function(e){var t="string"===typeof e?e:"success";r.Am.success(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},i=function(e){var t="string"===typeof e?e:"success";r.Am.info(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},74066:function(e,t,n){n(72791);var r=n(80184);t.Z=function(){return(0,r.jsx)("div",{className:"card w-50 p-5 text-center justify-content-center no-data",children:(0,r.jsx)("h4",{className:"fw-normal mb-3",children:"No data to Display"})})}},90883:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(72791),a=n(80184),s=function(e){var t=e.offset,n=e.limit,s=e.count;return(0,a.jsx)(r.Fragment,{children:(0,a.jsxs)("p",{children:["Showing ",t," to"," ",n>s||0===n?s:n," of ",s," entries"]})})},i=r.memo(s),c=function(e){var t=e.postsPerPage,n=e.totalPosts,r=e.paginate,s=e.handleClick,i=e.currentPage,c=e.maxPageNumberLimit,o=e.minPageNumberLimit,l=[];if(t>0)for(var u=1;u<=Math.ceil(n/t);u++)l.push(u);l.length;return o>=1&&(0,a.jsx)("button",{className:"page-link",onClick:function(){return s("previous")},children:"\u2026"}),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("ul",{className:"pagination pagination-sm justify-content-end",children:[(0,a.jsx)("li",{className:"page-item ",children:(0,a.jsx)("button",{className:"page-link",onClick:function(){return s("previous")},disabled:i===l[0],children:"\xab"})}),l.map((function(e,t){return e<c+1&&e>o?(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("button",{onClick:function(){return r(e)},className:"page-link ".concat(t+1===i?"active":null),children:e})},e):null})),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("button",{className:"page-link",onClick:function(){return s("next")},disabled:i===l[l.length-1],children:"\xbb"})})]})})},o=r.memo(c),l=function(e){var t=e.currentPage,n=e.postsPerPage,r=e.count,s=e.paginate,c=e.handleClick,l=e.setCurrentPage,u=e.minPageNumberLimit,d=e.maxPageNumberLimit;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(i,{offset:1+(t-1)*n,limit:n*t,count:r})}),n<r&&(0,a.jsx)("div",{className:"col-6 text-right",children:(0,a.jsx)(o,{postsPerPage:n,totalPosts:r,paginate:s,handleClick:c,currentPage:t,setCurrentPage:l,minPageNumberLimit:u,maxPageNumberLimit:d})})]})})}},537:function(e,t,n){var r=n(72791),a=n(80184),s=function(e){var t=e.postsPerPage,n=e.setPostsPerPage;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{className:"fw-normal p-0 m-0",children:["Show",(0,a.jsxs)("span",{className:"ml-1 mr-1",children:[" ",(0,a.jsxs)("select",{value:t,onChange:function(e){var t=Number(e.target.value);n(t)},children:[(0,a.jsx)("option",{value:"10",children:"10"}),(0,a.jsx)("option",{value:"20",children:"20"}),(0,a.jsx)("option",{value:"40",children:"40"}),(0,a.jsx)("option",{value:"99999999",children:"All"})]})]})," ","entries"]})})};t.Z=r.memo(s)},86062:function(e,t,n){n.d(t,{Z:function(){return a}});n(72791);var r=n(80184),a=function(){return(0,r.jsx)("div",{className:"progress-wrapper",children:(0,r.jsxs)("div",{className:"progress-container",children:[(0,r.jsx)("h4",{children:"Printing..."}),(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"circle border"})}),(0,r.jsx)("p",{children:"Please, Do not close this window."})]})})}},12721:function(e,t,n){n(72791);var r=n(84341),a=n(80184);t.Z=function(){return(0,a.jsxs)("div",{className:" w-100 ",children:[(0,a.jsxs)("div",{className:"row ",children:[(0,a.jsx)("div",{className:"col-6 d-flex ",children:(0,a.jsx)(r.ZP,{width:200,height:25})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:80,height:30})})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(r.ZP,{height:40}),(0,a.jsx)(r.ZP,{count:10,height:25})]}),(0,a.jsxs)("div",{className:"row d-flex mt-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(r.ZP,{width:220,height:20})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:200,height:30})})]})]})}},98158:function(e,t,n){n(72791);var r=n(36652),a=n(80184);t.Z=function(e){var t=e.content,n=e.children;return(0,a.jsx)(r.ZP,{content:t,children:n})}},30829:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(70885),a=n(72791),s=n(50645),i=n(15861),c=n(64687),o=n.n(c),l=n(89731),u=function(e){return l.ZP.get("api/v1/application/entry-pass-list?offset=0&limit=".concat(e,"&ordering=-id&status=approved&application_type=new"))},d=function(e){return l.ZP.get(e)},p=function(e){return l.ZP.get(e)},m=function(e,t){return l.ZP.get("api/v1/application/entry-pass-list?offset=".concat((e-1)*t,"&limit=").concat(t,"&ordering=-id&status=approved&application_type=new"))},h=function(e,t){return l.ZP.get("api/v1/application/entry-pass-list?offset=0&limit=".concat(t,"&search=").concat(e,"&status=approved&application_type=new"))},f=function(e){return l.Yb.post("/api/v1/china-pass-card-printer-app/",e,{headers:{"Content-Type":"application/json"}})},v=n(28786),x=function(){return{type:v.e.LOADING_APPROVED_CARD}},g=function(e){return{type:v.e.GET_APPROVED_CARD_SUCCESS,payload:e}},N=function(e){return{type:v.e.GET_APPROVED_CARD_FAIL,payload:e}},j=n(29801),b=function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,u(e);case 4:r=t.sent,a=r.data,n(g(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(N(t.t0)),(0,j.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},P=function(e){var t=e.number,n=e.postsPerPage;return function(){var e=(0,i.Z)(o().mark((function e(r){var a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(x()),e.next=4,m(t,n);case 4:a=e.sent,s=a.data,r(g(s)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(N(e.t0)),(0,j.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},C=function(e,t){return function(){var n=(0,i.Z)(o().mark((function n(r){var a,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(x()),n.next=4,h(e,t);case 4:a=n.sent,s=a.data,r(g(s)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(N(n.t0)),(0,j.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,a,s,i,c,l,u,d,p,m,h,x,g,N,b,P,C,y,w,k,Z,S,A,I;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.id,a=e.fullName,s=e.dobBs,i=e.cardExpiryDate,c=e.fatherName,l=e.district,u=e.palika,d=e.wardNumber,p=e.gender,m=e.office,h=e.signature,x=e.approvedBy,g=e.cardIssueDate,N=e.birthPlace,b=e.cardNumber,P=e.cardId,C=e.submissionNumber,y=e.base64UserPhoto,w=e.uniqueSlug,k=localStorage.getItem("accessToken"),Z=localStorage.getItem("refreshToken"),S={masterId:r,name:a,fatherName:c,dateOfBirth:s,cardExpiryDate:i,birthPlace:null===N||void 0===N?void 0:N.name,district:l.name,localLevel:u.name,wardNo:d,issueOffice:m.name,cardHolderSignature:h.split(",")[1],officerName:x.name,gender:p,slug:w,designation:null===x||void 0===x?void 0:x.designation,issueDate:g,issuerSignature:x&&(null===x||void 0===x?void 0:x.signature.split(",")[1]),cardNo:b,cardId:P,submissionNumber:C,cardHolderPhoto:y,accessToken:k,refreshToken:Z},t.prev=4,n({type:v.e.LOADING_PRINT_CARD}),t.next=8,f(S);case 8:return A=t.sent,I=A.data,n({type:v.e.CARD_PRINT_SUCCESS}),t.abrupt("return",I);case 14:return t.prev=14,t.t0=t.catch(4),n((t.t0,{type:v.e.CARD_PRINT_FAIL})),(0,j.Mn)(t.t0),t.abrupt("return",t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}()},w=n(12202),k=n(16030),Z=n(74066),S=n(90883),A=n(98158),I=n(35125),L=n(20741),R=n(80184),_=function(e){var t=e.show,n=e.setShow,r=e.info,s=e.setInfo,i=(0,a.useRef)(null),c=r.cardId,o=r.userPhoto,l=r.cardNumber,u=r.submissionNumber,d=r.fullName,p=r.fatherName,m=r.dob,h=r.gender,f=r.district,v=r.palika,x=r.signaturePhoto,g=r.approvedBy,N=r.cardIssueDate,j=o,b="Card No:- ".concat(l),P="Sex:- ".concat("m"===h?"Male":"f"===h?"Female":"Other"),C="Name:- ".concat(d),y="Father's Name:- ".concat(p),k="Date of Birth:- ".concat(m),Z="Address:-",S="".concat(null===f||void 0===f?void 0:f.name),A="Municipality:- ".concat(null===v||void 0===v?void 0:v.name),_="Officer's Name: ".concat(g&&null!==g&&void 0!==g&&g.name?null===g||void 0===g?void 0:g.name:""),D="Designation: ".concat(g&&null!==g&&void 0!==g&&g.designation?null===g||void 0===g?void 0:g.designation:""),T="Issued Date: ".concat(N?N.slice(0,10):""),O="Signature: ";var M=15,E=60,B=new I.default({orientation:"landscape",unit:"mm",format:[430,270]});B.setFontSize(40),E+=45,B.text(b,M,E),E+=18,B.text(C,M,E),E+=18,B.text(y,M,E),E+=18,B.text(k,M,E),B.text(P,215,E),E+=18,B.text(Z,M,E);var F=B.getTextWidth(Z);B.text(S,M+F+4,E),B.setLineWidth(.01),B.setLineDashPattern([1,1]),B.setDrawColor(0,0,0),E+=18,B.text(A,M,E),E+=18,E+=18,B.addImage(j,323,85,90,96.5),B.setLineDash([]),B.addPage();var U=25;B.text("Card Holder's",20,U),B.setLineWidth(.05),B.setDrawColor(0,0,0),B.line(20,29,105,29),B.text("Card Issuing Authority",215,U),B.setLineWidth(.07),B.setDrawColor(0,0,0),B.line(215,29,355,29),U+=20;var H=B.getTextWidth(O),z=JSON.stringify({id:c,submissionNumber:u,cardNumber:l}),G=document.createElement("canvas"),W=G.getContext("2d");i.current={data:G,ctx:W},L.toCanvas(G,z,(function(e){e?console.error(e):console.log("QR Code generated successfully")})),B.addImage(G,"PNG",14,107,70,70),B.addImage(x,"PNG",H+6,40,50,40),B.text(O,20,U),B.text(_,200,U),U+=20,B.text(D,200,U),U+=20,B.addImage(null===g||void 0===g?void 0:g.signaturePhoto,"PNG",290,70,35,25),B.text("Signature:",200,U),U+=20,B.text(T,200,U),U+=20,B.setFontSize(34),U+=40;var q=B.output("blob"),V=URL.createObjectURL(q),J="".concat(V,"#toolbar=0"),Y=t?"modal display-block":"modal display-none";return(0,R.jsxs)("div",{className:Y,tabIndex:"-1",children:[(0,R.jsx)("div",{className:"modal-dialog modal-lg",children:(0,R.jsxs)("div",{className:"modal-content content",children:[(0,R.jsxs)("div",{className:"modal-header",children:[(0,R.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Print Preview"}),(0,R.jsx)("button",{type:"button",className:"btn-close","data-dismiss":"modal","aria-label":"Close",onClick:function(){n(!1),s("")},children:(0,R.jsx)(w.aHS,{})})]}),(0,R.jsxs)("div",{className:"modal-body text-center",children:[!l&&(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{children:"Card Number is not generated."}),(0,R.jsx)("p",{children:"Please request for card number first."})]}),(0,R.jsx)("iframe",{type:"application/pdf",width:"500px",src:J,height:"630px",title:"Print Preview"})]}),(0,R.jsx)("canvas",{ref:i,style:{display:"none"}})]})})," "]})},D=n(86062),T=function(e){var t=e.currentPage,n=e.postsPerPage,s=e.setCurrentPage,c=e.count,l=e.maxPageNumberLimit,u=e.setMaxPageNumberLimit,m=e.minPageNumberLimit,h=e.setMinPageNumberLimit,f=(e.search,(0,a.useState)(!1)),v=(0,r.Z)(f,2),C=v[0],I=v[1],L=(0,a.useState)(null),T=(0,r.Z)(L,2),O=T[0],M=T[1],E=(0,k.v9)((function(e){return e.auth.permissions})),B=(0,k.v9)((function(e){return e.auth.isAdmin})),F=(0,k.v9)((function(e){return e.auth.isSuperuser})),U=(0,k.v9)((function(e){return e.approvedCard.approvedCards})),H=(0,k.v9)((function(e){return e.approvedCard.previous})),z=(0,k.v9)((function(e){return e.approvedCard.next})),G=(0,k.v9)((function(e){return e.approvedCard.loadingPrint})),W=(0,k.I0)(),q=(0,a.useState)(5),V=(0,r.Z)(q,1)[0],J=(E.includes("can_read_entrypass"),E.includes("can_print_cardprinting")),Y=function(){var e=(0,i.Z)(o().mark((function e(t){var r,a,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&null!==(r=t.approvedBy)&&void 0!==r&&r.signature){e.next=4;break}(0,j.Mn)("Please issue your signature first."),e.next=16;break;case 4:return e.prev=4,e.next=7,W(y(t));case 7:a=e.sent,s=a.message,void 0!==(i=a.status)&&(!1===i?(0,j.Mn)(s):((0,j.My)(s),W(b(n)))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),(0,j.Mn)(e.t0.message||"An error occurred while printing the card");case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)(R.Fragment,{children:[G&&(0,R.jsx)(D.Z,{}),(null===U||void 0===U?void 0:U.length)>0?(0,R.jsxs)("div",{className:"mt-2",children:[(0,R.jsx)("div",{className:"table-scrollable",children:(0,R.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{scope:"col",style:{width:"2%"},children:"S.N"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Name"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Email"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Citizenship"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Mobile number"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"DOB BS"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Office"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Reference"}),!B&&!F&&(0,R.jsx)("th",{scope:"col",children:"Action"})]})}),(0,R.jsx)("tbody",{children:(null===U||void 0===U?void 0:U.length)>0&&U.map((function(e,r){var a=e.id,s=e.fullName,i=e.email,c=e.citizenshipNumber,o=e.mobileNumber,l=e.submissionNumber,u=e.dobBs,d=e.office;return(0,R.jsxs)("tr",{children:[(0,R.jsxs)("td",{className:"fw-bold",style:{width:"2%"},children:[n*(t-1)+(r+1)," "]}),(0,R.jsx)("td",{className:"text-left",children:s||"N/A"}),(0,R.jsx)("td",{className:"text-left",style:{wordBreak:"break-all"},children:i||"N/A"}),(0,R.jsx)("td",{className:"text-left",children:c||"N/A"}),(0,R.jsx)("td",{className:"text-left",children:o||"N/A"}),(0,R.jsx)("td",{className:"text-left",children:u||"N/A"}),(0,R.jsx)("td",{className:"text-left",children:null===d||void 0===d?void 0:d.name}),(0,R.jsx)("td",{className:"text-left",children:l}),!B&&!F&&(0,R.jsx)("td",{children:J&&(0,R.jsx)(A.Z,{content:"Print Card",children:(0,R.jsx)("button",{onClick:function(){return Y(e)},className:"btn btn-md btn-success mx-2",children:(0,R.jsx)(w.l_A,{size:16})})})})]},a)}))})]})}),c>0&&(0,R.jsx)(S.Z,{currentPage:t,postsPerPage:n,count:c,paginate:function(e){W(P({number:e,postsPerPage:n})),s(e)},handleClick:function(e){"previous"===e?(W(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,d(e);case 4:r=t.sent,a=r.data,n(g(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(N(t.t0)),(0,j.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(H)),s((function(e){return e-1})),(t-1)%V===0&&(u(l-V),h(m-V))):"next"===e&&(W(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,p(e);case 4:r=t.sent,a=r.data,n(g(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(N(t.t0)),(0,j.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(z)),s((function(e){return e+1})),t+1>l&&(u(l+V),h(m+V)))},setCurrentPage:s,minPageNumberLimit:m,maxPageNumberLimit:l})]}):(0,R.jsx)(Z.Z,{}),C&&(0,R.jsx)(_,{show:C,setShow:I,info:O,setInfo:M})]})},O=n(12721),M=n(537),E=function(){var e=(0,k.v9)((function(e){return e.approvedCard.approvedCards})),t=(0,k.v9)((function(e){return e.approvedCard.loading})),n=(0,k.v9)((function(e){return e.approvedCard.loadingUpdated})),i=(0,k.v9)((function(e){return e.approvedCard.count})),c=(0,k.v9)((function(e){return e.search.search})),o=(0,k.I0)(),l=(0,a.useState)(1),u=(0,r.Z)(l,2),d=u[0],p=u[1],m=(0,a.useState)(5),h=(0,r.Z)(m,2),f=h[0],v=h[1],x=(0,a.useState)(0),g=(0,r.Z)(x,2),N=g[0],j=g[1],P=(0,a.useState)(10),y=(0,r.Z)(P,2),w=y[0],Z=y[1];return(0,a.useEffect)((function(){0===w?o(""===c?b(i):C(c,i)):""===c?(w===s.P||p(1),o(b(w))):(p(1),v(5),j(0),o(C(c,w)))}),[o,w,c]),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:"user-card",children:[(0,R.jsx)("div",{className:"header-content",children:(0,R.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Approved Cards Listing"})}),(0,R.jsxs)("div",{className:"".concat((null===e||void 0===e?void 0:e.length)>0?"office-card-body":"card-body"),children:[(0,R.jsx)("div",{className:"row m-0 p-0",children:(null===e||void 0===e?void 0:e.length)>0&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("div",{className:"col-6",children:(0,R.jsx)(M.Z,{postsPerPage:w,setPostsPerPage:Z})})})}),t&&(0,R.jsx)(O.Z,{}),n&&(0,R.jsx)(O.Z,{}),!t&&!n&&(0,R.jsx)(T,{currentPage:d,setCurrentPage:p,postsPerPage:w,setPostsPerPage:Z,count:i,maxPageNumberLimit:f,setMaxPageNumberLimit:v,minPageNumberLimit:N,setMinPageNumberLimit:j,search:c})]})]})})}},89731:function(e,t,n){n.d(t,{Yb:function(){return d}});var r=n(15861),a=n(64687),s=n.n(a),i=n(74569),c=n.n(i),o=n(90106),l=n(48044),u=n(30577),d=(c().create({baseURL:"http://chinapass.sushiloli.com.np"}),c().create({baseURL:"http://localhost:9010",headers:{"Content-Type":"application/json"}})),p=c().create({baseURL:"http://chinapass.sushiloli.com.np",headers:{"Content-Type":"application/json"}});p.interceptors.request.use((function(e){if(window.navigator.onLine)return e.headers.Authorization=localStorage.getItem("accessToken")?"Bearer ".concat(localStorage.getItem("accessToken")):null,e.baseURL="http://chinapass.sushiloli.com.np",e}),(function(e){return Promise.reject(e)})),p.interceptors.response.use((function(e){return e}),function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,a,i,c,d,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.config,401===t.response.status&&"auth/token/refresh"===c.url&&o.h.dispatch({type:l.w.AUTH_ERROR}),"token_not_valid"!==(null===(n=t.response)||void 0===n?void 0:n.data.code)||c._retry){e.next=19;break}return c._retry=!0,e.prev=4,d=JSON.stringify({refresh:localStorage.getItem("refreshToken")}),localStorage.removeItem("accessToken"),e.next=9,p.post("auth/token/refresh",d);case 9:if(200!==(m=e.sent).status){e.next=14;break}return localStorage.setItem("accessToken",null===m||void 0===m?void 0:m.data.access),c.headers.Authorization="Bearer ".concat(null===m||void 0===m?void 0:m.data.access),e.abrupt("return",p(c));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),o.h.dispatch({type:l.w.AUTH_ERROR});case 19:if("No Internet"===t&&u.Am.error("No Internet Connection !!!"),"Network Error"===t.message&&u.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),500===(null===(r=t.response)||void 0===r?void 0:r.status)&&u.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),404===(null===(a=t.response)||void 0===a?void 0:a.status)&&u.Am.error("Page Not Found !!!!!",{autoClose:1200}),401!==(null===(i=t.response)||void 0===i?void 0:i.status)&&"Invalid token specified"!==t.message){e.next=26;break}return o.h.dispatch({type:l.w.AUTH_ERROR}),e.abrupt("return",Promise.reject(t.response.data.detail));case 26:if(!(t.response&&t.response.status>=400&&t.response.status<500)){e.next=33;break}if(!t.response.data.detail){e.next=32;break}return e.abrupt("return",Promise.reject("".concat(t.response.data.detail)));case 32:return e.abrupt("return",Promise.reject("".concat(t.response.statusText)));case 33:return e.abrupt("return",Promise.reject(t));case 34:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),t.ZP=p},50645:function(e,t,n){n.d(t,{P:function(){return r}});var r=10}}]);
//# sourceMappingURL=829.59e13dce.chunk.js.map