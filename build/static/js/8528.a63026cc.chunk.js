"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8528],{81829:function(e,n,t){t(72791);var r=t(12202),a=t(98158),i=t(80184);n.Z=function(e){var n=e.search,t=e.onClick,c=e.addPermission;return(0,i.jsxs)("div",{className:"card w-50 p-5 text-center justify-content-center no-data",children:[(0,i.jsx)("h4",{className:"fw-normal mb-3",children:"No data to Display"}),!n&&c&&(0,i.jsxs)("h6",{children:["Please Add Data ",(0,i.jsx)("br",{}),(0,i.jsx)(a.Z,{content:"Add",children:(0,i.jsxs)("button",{onClick:t,className:"btn btn-primary btn-md mx-2 px-3 py-1 mt-3",children:[(0,i.jsx)(r.wEH,{className:"nodata-icon",size:20})," Add"]})})," "]})]})}},32044:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(70885),a=t(72791),i=t(50645),c=t(58284),s=t(12721),o=t(16030),l=t(12202),d=t(98158),u=t(28931),p=(t(88451),t(90883),t(81829)),h=t(36406),m=t(80184),f=function(e){var n=e.currentPage,t=e.postsPerPage,r=e.search,a=(e.showModal,e.setShowModal),i=((0,o.v9)((function(e){return e.auth.group})),(0,o.v9)((function(e){return e.auth.isAdmin}))),c=(0,o.v9)((function(e){return e.auth.isSuperuser})),s=(0,o.v9)((function(e){return e.organizationSetup})).organizationSetups,u=(0,o.I0)();return(0,m.jsx)(m.Fragment,{children:(null===s||void 0===s?void 0:s.length)>0?(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("div",{className:"table-scrollable",children:(0,m.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{scope:"col",style:{width:"8%"},children:"S.N"}),(0,m.jsx)("th",{scope:"col",children:"Recommendation Required"}),(0,m.jsx)("th",{scope:"col",children:"Can Minor Apply"}),(0,m.jsx)("th",{scope:"col",children:"Other Letters Required"}),(0,m.jsx)("th",{scope:"col",children:"New Card Validity Year"}),(0,m.jsx)("th",{scope:"col",children:"Renew Card Validity Year"}),(0,m.jsx)("th",{scope:"col",children:"Action"})]})}),(0,m.jsx)("tbody",{children:(null===s||void 0===s?void 0:s.length)>0&&s.map((function(e,r){var s=e.id,o=e.recommendationRequired,p=e.canMinorApply,f=e.otherLettersRequired,x=e.newCardValidityYear,v=e.renewCardValidityYear;return(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"fw-bold",style:{width:"8%"},children:[t*(n-1)+(r+1)," "]}),(0,m.jsx)("td",{children:o?"Yes":"No"}),(0,m.jsx)("td",{children:p?"Yes":"No"}),(0,m.jsx)("td",{children:f?"Yes":"No"}),(0,m.jsx)("td",{children:x}),(0,m.jsx)("td",{children:v}),(0,m.jsx)("td",{children:(i||c)&&(0,m.jsx)(d.Z,{content:"Edit",children:(0,m.jsx)("button",{onClick:function(){return function(e){u({type:h.E.ORGANIZATION_SETUP_EDIT,payload:e}),a(!0)}(s)},className:"btn btn-sm btn-edit btn-primary mx-2",children:(0,m.jsx)(l.fmQ,{})})})})]},s)}))})]})})}):(0,m.jsx)(p.Z,{search:r,onClick:function(){return a(!0)},addPermission:i||c})})},x=t(1413),v=t(15861),y=t(64687),w=t.n(y),j=t(76863),N=t(92506),g=t(94924),b=(t(28180),t(2557)),A=(t(29801),t(83515),function(e){var n=e.setShowModal,t=(e.showModal,(0,o.v9)((function(e){return e.organizationSetup}))),r=t.organizationSetup,a=t.edit,i={recommendationRequired:a&&r?r.recommendationRequired:"",canMinorApply:a&&r?r.canMinorApply:"",newCardValidityYear:a&&r?r.newCardValidityYear:"",renewCardValidityYear:a&&r?r.renewCardValidityYear:""},s=j.Ry().shape({recommendationRequired:j.O7(),canMinorApply:j.O7(),newCardValidityYear:j.Rx().min(0).max(2147483647),renewCardValidityYear:j.Rx().min(0).max(2147483647)}),l=(0,o.I0)(),d=function(){var e=(0,v.Z)(w().mark((function e(t){var i,s,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=7;break}return e.next=3,l((0,c.Qm)(t));case 3:i=e.sent,n(!i),e.next=12;break;case 7:return s={id:null===r||void 0===r?void 0:r.id,values:(0,x.Z)({},t)},e.next=10,l((0,c.sA)(s));case 10:o=e.sent,n(!o);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-12",children:(0,m.jsx)(N.J9,{initialValues:i,validationSchema:s,onSubmit:d,children:function(e){var n=e.setFieldValue;return(0,m.jsxs)(N.l0,{autoComplete:"off",children:[(0,m.jsxs)("div",{className:"my-2",children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-6 mb-3",children:[(0,m.jsxs)("label",{htmlFor:"name",className:"fw-bold float-start",children:["Recommendation Required",(0,m.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,m.jsx)("input",{type:"checkbox",name:"recommendationRequired",className:"form-check-input ml-3",checked:e.values.recommendationRequired,onChange:function(e){n("recommendationRequired",e.target.checked)}}),(0,m.jsx)(N.Bc,{name:"recommendationRequired",component:g.Z})]}),(0,m.jsxs)("div",{className:"col-6 mb-3",children:[(0,m.jsxs)("label",{htmlFor:"canMinorApply",className:"fw-bold float-start",children:["Can Minor Apply",(0,m.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,m.jsx)("input",{type:"checkbox",name:"canMinorApply",className:"form-check-input ml-3",checked:e.values.canMinorApply,onChange:function(e){n("canMinorApply",e.target.checked)}}),(0,m.jsx)(N.Bc,{name:"canMinorApply",component:g.Z})]})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-6",children:[(0,m.jsxs)("label",{htmlFor:"newCardValidityYear",className:"fw-bold float-start",children:["New Card Validity Year",(0,m.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,m.jsx)(N.gN,{type:"number",value:e.values.newCardValidityYear,name:"newCardValidityYear",onChange:function(e){n("newCardValidityYear",e.target.value)},className:"form-control "}),(0,m.jsx)(N.Bc,{name:"newCardValidityYear",component:g.Z})]}),(0,m.jsxs)("div",{className:"col-6",children:[(0,m.jsxs)("label",{htmlFor:"renewCardValidityYear",className:"fw-bold float-start",children:["Renew Card Validity Year",(0,m.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,m.jsx)(N.gN,{type:"number",value:e.values.renewCardValidityYear,name:"renewCardValidityYear",onChange:function(e){n("renewCardValidityYear",e.target.value)},className:"form-control "}),(0,m.jsx)(N.Bc,{name:"renewCardValidityYear",component:g.Z})]})]})]}),(0,m.jsx)("div",{className:"my-4 d-flex justify-content-end align-items-center",children:(0,m.jsx)(b.Z,{type:"submit",className:"btn btn-primary",createButton:!0,title:a?"Update":"Save",content:a?"Update":"Save"})})]})}})})})}),C=t(66495),S=function(){var e=(0,u.k6)(),n=(0,o.v9)((function(e){return e.organizationSetup.count})),t=(0,o.v9)((function(e){return e.organizationSetup.loading})),p=(0,o.v9)((function(e){return e.organizationSetup.loadingUpdate})),h=(0,o.v9)((function(e){return e.organizationSetup.organizationSetup})),x=(0,o.v9)((function(e){return e.organizationSetup.edit})),v=(0,o.v9)((function(e){return e.search.search})),y=(0,o.I0)(),w=(0,a.useState)(1),j=(0,r.Z)(w,2),N=j[0],g=j[1],b=(0,a.useState)(5),S=(0,r.Z)(b,2),R=S[0],Z=S[1],E=(0,a.useState)(0),k=(0,r.Z)(E,2),M=k[0],P=k[1],Y=(0,a.useState)(10),O=(0,r.Z)(Y,2),V=O[0],I=O[1],T=(0,a.useState)(!1),_=(0,r.Z)(T,2),L=_[0],q=_[1];return(0,a.useEffect)((function(){0===V?y(""===v?(0,c.RP)(n):(0,c.o1)(v,n)):""===v?(V===i.P||g(1),y((0,c.RP)(V))):(g(1),Z(5),P(0),y((0,c.o1)(v,V)))}),[y,V,v]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("div",{className:"header-content",children:(0,m.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Organization Rule"})}),(0,m.jsxs)("div",{className:"".concat((null===h||void 0===h?void 0:h.length)>0?"office-card-body":""),children:[(0,m.jsx)("div",{className:"row m-0 p-0",children:(null===h||void 0===h?void 0:h.length)>0&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"col-6 text-right",children:(0,m.jsx)(d.Z,{content:"Add",children:(0,m.jsxs)("button",{className:"btn btn-primary waves-effect waves-light btn-sm float-end",onClick:function(){return e.push("/create-entry-exit-pass")},children:[(0,m.jsx)(l.wEH,{className:"mb-1"}),"\xa0Add"]})})})})}),t&&(0,m.jsx)(s.Z,{}),p&&(0,m.jsx)(s.Z,{}),!t&&(0,m.jsx)(f,{currentPage:N,setCurrentPage:g,postsPerPage:V,setPostsPerPage:I,count:n,maxPageNumberLimit:R,setMaxPageNumberLimit:Z,minPageNumberLimit:M,setMinPageNumberLimit:P,search:v,showModal:L,setShowModal:q}),L&&(0,m.jsx)(C.Z,{header:"Set Organization Rule",types:"setup",size:"modal-lg",setShowModal:q,showModal:L,edit:x,clearAction:c.Ob,children:(0,m.jsx)(A,{setShowModal:q,showModal:L,edit:x})})]})]})})}},58284:function(e,n,t){t.d(n,{Qm:function(){return y},Xu:function(){return v},RP:function(){return x},o1:function(){return j},Ob:function(){return N},sA:function(){return w}});var r=t(15861),a=t(64687),i=t.n(a),c=t(89731),s=function(e){return c.ZP.post("api/v1/core-app/org-rule",e)},o=function(e,n){return c.ZP.patch("api/v1/core-app/org-rule/".concat(e),n)},l=function(e,n){return c.ZP.get("api/v1/core-app/org-rule?offset=0&limit=".concat(n,"&search=").concat(e))},d=t(36406),u=function(){return{type:d.E.LOADING_ORGANIZATION_SETUP}},p=function(e){return{type:d.E.GET_ORGANIZATION_SETUP_SUCCESS,payload:e}},h=function(e){return{type:d.E.GET_ORGANIZATION_SETUP_FAIL,payload:e}},m=function(e){return{type:d.E.GET_ORGANIZATION_SUCCESS,payload:e}},f=t(29801),x=function(){return function(){var e=(0,r.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(u()),e.next=4,c.ZP.get("api/v1/core-app/org-rule?offset=0&limit=0&ordering=-id");case 4:t=e.sent,r=t.data,n(p(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n(h(e.t0)),(0,f.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()},v=function(){return function(){var e=(0,r.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:d.E.LOADING_ORGANIZATION}),e.next=4,c.ZP.get("api/v1/core-app/organization-setup/list?limit=0");case 4:t=e.sent,r=t.data,n(m(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n((a=e.t0,{type:d.E.GET_ORGANIZATION_FAIL,payload:a})),(0,f.Mn)(e.t0);case 13:case"end":return e.stop()}var a}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()},y=function(e){return function(){var n=(0,r.Z)(i().mark((function n(t){var r,a,c,o,l,p;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.canMinorApply,a=e.newCardValidityYear,c=e.otherLettersRequired,o=e.recommendationRequired,l=e.renewCardValidityYear,n.prev=1,(p=new FormData).append("canMinorApply",r),p.append("newCardValidityYear",a),p.append("otherLettersRequired",c),p.append("recommendationRequired",o),p.append("renewCardValidityYear",l),t(u()),n.next=11,s(p);case 11:return(0,f.My)("Organization Setup created successfully "),t(x(10)),n.abrupt("return",!0);case 16:n.prev=16,n.t0=n.catch(1),t((i=n.t0,{type:d.E.CREATE_ORGANIZATION_SETUP_FAIL,payload:i})),(0,f.Mn)("Failed to create Organization Setup.");case 20:case"end":return n.stop()}var i}),n,null,[[1,16]])})));return function(e){return n.apply(this,arguments)}}()},w=function(e){return function(){var n=(0,r.Z)(i().mark((function n(t){var r,a,c,s,l,p,h,m,v;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,a=e.values,c=a.canMinorApply,s=a.newCardValidityYear,l=a.otherLettersRequired,p=a.recommendationRequired,h=a.renewCardValidityYear,n.prev=2,t({type:d.E.LOADING_UPDATED}),(m=new FormData).append("canMinorApply",c),m.append("newCardValidityYear",s),m.append("otherLettersRequired",l),m.append("recommendationRequired",p),m.append("renewCardValidityYear",h),t(u()),n.next=13,o(r,m);case 13:return v=n.sent,v.data,t(x(10)),(0,f.My)("Organization Setup Updated Successfully "),n.abrupt("return",!0);case 20:n.prev=20,n.t0=n.catch(2),t((i=n.t0,{type:d.E.UPDATE_ORGANIZATION_SETUP_FAIL,payload:i})),(0,f.Mn)("Failed to Update Organization Setup");case 24:case"end":return n.stop()}var i}),n,null,[[2,20]])})));return function(e){return n.apply(this,arguments)}}()},j=function(e,n){return function(){var t=(0,r.Z)(i().mark((function t(r){var a,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(u()),t.next=4,l(e,n);case 4:a=t.sent,c=a.data,r(p(c)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),r(h(t.t0)),(0,f.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},N=function(){return function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:d.E.CLEAR_ALL_DATA}),e.abrupt("return",!0);case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}()}},83515:function(e,n,t){var r=t(15861),a=t(70885),i=t(64687),c=t.n(i),s=t(72791);n.Z=function(e,n){var t=(0,s.useState)(null),i=(0,a.Z)(t,2),o=i[0],l=i[1];return(0,s.useEffect)((function(){var t=function(){var e=(0,r.Z)(c().mark((function e(){var t,r,a,i,s,o,d,u,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch: ".concat(r.status," ").concat(r.statusText));case 6:return e.next=8,r.arrayBuffer();case 8:a=e.sent,i=new URL(n),s=null===i||void 0===i||null===(t=i.pathname)||void 0===t?void 0:t.split("/"),o=new Blob([a]),d=s[(null===s||void 0===s?void 0:s.length)-1],u=null===d||void 0===d?void 0:d.split("."),p=new File([o],d,{type:"image/".concat(u[(null===u||void 0===u?void 0:u.length)-1])}),l(p),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Error fetching binary data:",e.t0);case 21:return e.prev=21,e.finish(21);case 23:case"end":return e.stop()}}),e,null,[[0,18,21,23]])})));return function(){return e.apply(this,arguments)}}();e&&n&&t()}),[e,n]),o}}}]);
//# sourceMappingURL=8528.a63026cc.chunk.js.map