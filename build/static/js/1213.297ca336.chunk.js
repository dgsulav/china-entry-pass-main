"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1213],{29801:function(e,r,t){t.d(r,{Mn:function(){return a},My:function(){return s},W2:function(){return o}});var n=t(30577);n.Am.configure();var a=function(e){var r="string"===typeof e?e:"error";n.Am.error(r,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},s=function(e){var r="string"===typeof e?e:"success";n.Am.success(r,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},o=function(e){var r="string"===typeof e?e:"success";n.Am.info(r,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},16587:function(e,r,t){t(72791);var n=t(32328),a=t(80184);r.Z=function(){return(0,a.jsx)("img",{src:n,alt:"spinner",height:"50px"})}},94924:function(e,r,t){t.d(r,{Z:function(){return a}});t(72791);var n=t(80184),a=function(e){return(0,n.jsx)("div",{className:"error",children:e.children})}},51213:function(e,r,t){t.r(r);t(72791);var n=t(94924),a=t(16030),s=t(92506),o=t(76863),c=(t(7623),t(16587)),i=t(52685),u=(t(77298),t(80184));r.default=function(){var e=(0,a.v9)((function(e){return e.auth.loadingResetPassword})),r=((0,a.v9)((function(e){return e.auth.message})),(0,a.v9)((function(e){return e.auth.branches})),o.Ry().shape({email:o.Z_().email().required("Email is required")})),t=(0,a.I0)();return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"login-bak",children:(0,u.jsx)("div",{className:"account-pages reset-container my-5",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"row justify-content-center",children:(0,u.jsx)("div",{className:"col-md-8 col-lg-6 col-xl-5",children:(0,u.jsxs)("div",{className:"card overflow-hidden card-reset",children:[(0,u.jsx)("div",{className:"bg-primary waves-effect waves-light bg-soft",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-sm-12",children:(0,u.jsx)("div",{className:"text-center m-3",children:(0,u.jsx)("h5",{className:"",children:"Reset Password"})})})})}),(0,u.jsx)("div",{className:"card-body pt-0",children:(0,u.jsx)("div",{className:"",children:(0,u.jsx)(s.J9,{initialValues:{email:""},validationSchema:r,onSubmit:function(e){t((0,i.c0)(e.email))},children:function(r){return(0,u.jsxs)(s.l0,{autoComplete:"off",className:"form-horizontal ",children:[(0,u.jsxs)("div",{className:"mb-3 mt-3",children:[(0,u.jsxs)("label",{htmlFor:"username",className:"form-label",children:["Email"," ",(0,u.jsx)("strong",{className:"text-danger ",children:"*"})]}),(0,u.jsx)(s.gN,{type:"text",className:"form-control textfield-login",name:"email",placeholder:"Enter Email"}),(0,u.jsx)(s.Bc,{name:"email",component:n.Z})]}),(0,u.jsx)("div",{className:"mt-3 text-center d-grid",children:(0,u.jsxs)("button",{className:"btn btn-primary waves-effect waves-light mt-4 m-3",type:"submit",disabled:e,children:["Continue ",e&&(0,u.jsx)(c.Z,{})]})})]})}})})})]})})})})})})})}},52685:function(e,r,t){t.d(r,{Cp:function(){return S},Zb:function(){return w},x4:function(){return y},c0:function(){return x},tb:function(){return b}});var n=t(15861),a=t(64687),s=t.n(a),o=t(89731),c=function(e){return o.ZP.post("auth/login",e)},i=function(e){return o.ZP.post("api/v1/user-app/password-reset/",e)},u=function(e){return o.ZP.post("api/v1/user-app/password-reset/confirm/",e)},l=function(e){return o.ZP.patch("auth/change-password",e)},p=function(e){return o.ZP.patch("auth/update-signature",e)},d=t(48044),f=function(){return{type:d.w.LOADING}},h=function(e){return{type:d.w.LOGIN_SUCCESS,payload:e}},v=function(e){return{type:d.w.RESET_SUCCESS,payload:e}},m=function(e){return{type:d.w.PASSWORD_CHANGE_SUCCESS,payload:e}},g=t(29801),y=function(e,r){return function(){var t=(0,n.Z)(s().mark((function t(n){var a,o,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(f()),a={username:e,password:r},t.next=5,c(a);case 5:o=t.sent,i=o.data,(0,g.My)("Welcome ".concat(i.user.username)),n(h(i)),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0,"error"),(0,g.Mn)(t.t0),n((s=t.t0,{type:d.w.LOGIN_FAIL,payload:s}));case 16:case"end":return t.stop()}var s}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var r=(0,n.Z)(s().mark((function r(t){var n,a,o;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:d.w.LOADING_RESET_PASSWORD}),n=JSON.stringify({email:e}),r.next=5,i(n);case 5:a=r.sent,o=a.data,t(v(o)),(0,g.My)("Email send successfully "),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),t((s=r.t0,{type:d.w.RESET_FAIL,payload:s})),(0,g.Mn)("There is no active user associated with this e-mail address  || the password can not be changed ");case 15:case"end":return r.stop()}var s}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()},w=function(e,r,t,a){return function(){var o=(0,n.Z)(s().mark((function n(o){var c,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o({type:d.w.LOADING_RESET}),c=JSON.stringify({token:t,password:e,confirm_password:r}),n.next=5,u(c);case 5:i=n.sent,i.data,o({type:d.w.PASSWORD_CONFIRM_SUCCESS}),(0,g.My)("Password has been reset successfully "),o({type:d.w.RESET_SUCCESS,payload:[]}),a.push("/"),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(0),o((s=n.t0,{type:d.w.PASSWORD_CONFIRM_FAIL,payload:s})),(0,g.Mn)("Failed to reset Password");case 17:case"end":return n.stop()}var s}),n,null,[[0,13]])})));return function(e){return o.apply(this,arguments)}}()},S=function(e,r,t,a){return function(){var o=(0,n.Z)(s().mark((function n(o){var c,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(f()),c=JSON.stringify({password:r,old_password:e,confirm_password:t}),n.next=5,l(c);case 5:i=n.sent,o(m(i)),(0,g.My)("Password changed successfully "),a.push("/"),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),o((s=n.t0,{type:d.w.PASSWORD_CHANGE_FAIL,payload:s})),(0,g.Mn)(n.t0);case 15:case"end":return n.stop()}var s}),n,null,[[0,11]])})));return function(e){return o.apply(this,arguments)}}()},b=function(e){return function(){var r=(0,n.Z)(s().mark((function r(t){var n,a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(f()),n=JSON.stringify({signature:e,signatureUpdating:!0}),r.next=5,p(n);case 5:return a=r.sent,(0,g.My)("Signature updated successfully"),t((o=null===a||void 0===a?void 0:a.data,{type:d.w.UPDATE_SIGNATURE_SUCCESS,payload:o})),r.abrupt("return",!0);case 11:r.prev=11,r.t0=r.catch(0),t((s=r.t0,{type:d.w.UPDATE_SIGNATURE_FAIL,payload:s})),(0,g.Mn)(r.t0);case 15:case"end":return r.stop()}var s,o}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}},89731:function(e,r,t){t.d(r,{Yb:function(){return p}});var n=t(15861),a=t(64687),s=t.n(a),o=t(74569),c=t.n(o),i=t(90106),u=t(48044),l=t(30577),p=(c().create({baseURL:"http://chinapass.sushiloli.com.np"}),c().create({baseURL:"http://localhost:9010",headers:{"Content-Type":"application/json"}})),d=c().create({baseURL:"http://chinapass.sushiloli.com.np",headers:{"Content-Type":"application/json"}});d.interceptors.request.use((function(e){if(window.navigator.onLine)return e.headers.Authorization=localStorage.getItem("accessToken")?"Bearer ".concat(localStorage.getItem("accessToken")):null,e.baseURL="http://chinapass.sushiloli.com.np",e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),function(){var e=(0,n.Z)(s().mark((function e(r){var t,n,a,o,c,p,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.config,401===r.response.status&&"auth/token/refresh"===c.url&&i.h.dispatch({type:u.w.AUTH_ERROR}),"token_not_valid"!==(null===(t=r.response)||void 0===t?void 0:t.data.code)||c._retry){e.next=19;break}return c._retry=!0,e.prev=4,p=JSON.stringify({refresh:localStorage.getItem("refreshToken")}),localStorage.removeItem("accessToken"),e.next=9,d.post("auth/token/refresh",p);case 9:if(200!==(f=e.sent).status){e.next=14;break}return localStorage.setItem("accessToken",null===f||void 0===f?void 0:f.data.access),c.headers.Authorization="Bearer ".concat(null===f||void 0===f?void 0:f.data.access),e.abrupt("return",d(c));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),i.h.dispatch({type:u.w.AUTH_ERROR});case 19:if("No Internet"===r&&l.Am.error("No Internet Connection !!!"),"Network Error"===r.message&&l.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),500===(null===(n=r.response)||void 0===n?void 0:n.status)&&l.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),404===(null===(a=r.response)||void 0===a?void 0:a.status)&&l.Am.error("Page Not Found !!!!!",{autoClose:1200}),401!==(null===(o=r.response)||void 0===o?void 0:o.status)&&"Invalid token specified"!==r.message){e.next=26;break}return i.h.dispatch({type:u.w.AUTH_ERROR}),e.abrupt("return",Promise.reject(r.response.data.detail));case 26:if(!(r.response&&r.response.status>=400&&r.response.status<500)){e.next=33;break}if(!r.response.data.detail){e.next=32;break}return e.abrupt("return",Promise.reject("".concat(r.response.data.detail)));case 32:return e.abrupt("return",Promise.reject("".concat(r.response.statusText)));case 33:return e.abrupt("return",Promise.reject(r));case 34:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(r){return e.apply(this,arguments)}}()),r.ZP=d},7623:function(){},32328:function(e,r,t){e.exports=t.p+"static/media/spinner.9012f56ae4662e1be3c6.gif"}}]);
//# sourceMappingURL=1213.297ca336.chunk.js.map