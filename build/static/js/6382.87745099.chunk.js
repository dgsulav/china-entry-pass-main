"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6382],{29801:function(e,t,n){n.d(t,{Mn:function(){return a},My:function(){return s},W2:function(){return i}});var r=n(30577);r.Am.configure();var a=function(e){var t="string"===typeof e?e:"error";r.Am.error(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},s=function(e){var t="string"===typeof e?e:"success";r.Am.success(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},i=function(e){var t="string"===typeof e?e:"success";r.Am.info(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},74066:function(e,t,n){n(72791);var r=n(80184);t.Z=function(){return(0,r.jsx)("div",{className:"card w-50 p-5 text-center justify-content-center no-data",children:(0,r.jsx)("h4",{className:"fw-normal mb-3",children:"No data to Display"})})}},90883:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(72791),a=n(80184),s=function(e){var t=e.offset,n=e.limit,s=e.count;return(0,a.jsx)(r.Fragment,{children:(0,a.jsxs)("p",{children:["Showing ",t," to"," ",n>s||0===n?s:n," of ",s," entries"]})})},i=r.memo(s),c=function(e){var t=e.postsPerPage,n=e.totalPosts,r=e.paginate,s=e.handleClick,i=e.currentPage,c=e.maxPageNumberLimit,o=e.minPageNumberLimit,l=[];if(t>0)for(var u=1;u<=Math.ceil(n/t);u++)l.push(u);l.length;return o>=1&&(0,a.jsx)("button",{className:"page-link",onClick:function(){return s("previous")},children:"\u2026"}),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("ul",{className:"pagination pagination-sm justify-content-end",children:[(0,a.jsx)("li",{className:"page-item ",children:(0,a.jsx)("button",{className:"page-link",onClick:function(){return s("previous")},disabled:i===l[0],children:"\xab"})}),l.map((function(e,t){return e<c+1&&e>o?(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("button",{onClick:function(){return r(e)},className:"page-link ".concat(t+1===i?"active":null),children:e})},e):null})),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("button",{className:"page-link",onClick:function(){return s("next")},disabled:i===l[l.length-1],children:"\xbb"})})]})})},o=r.memo(c),l=function(e){var t=e.currentPage,n=e.postsPerPage,r=e.count,s=e.paginate,c=e.handleClick,l=e.setCurrentPage,u=e.minPageNumberLimit,d=e.maxPageNumberLimit;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(i,{offset:1+(t-1)*n,limit:n*t,count:r})}),n<r&&(0,a.jsx)("div",{className:"col-6 text-right",children:(0,a.jsx)(o,{postsPerPage:n,totalPosts:r,paginate:s,handleClick:c,currentPage:t,setCurrentPage:l,minPageNumberLimit:u,maxPageNumberLimit:d})})]})})}},537:function(e,t,n){var r=n(72791),a=n(80184),s=function(e){var t=e.postsPerPage,n=e.setPostsPerPage;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{className:"fw-normal p-0 m-0",children:["Show",(0,a.jsxs)("span",{className:"ml-1 mr-1",children:[" ",(0,a.jsxs)("select",{value:t,onChange:function(e){var t=Number(e.target.value);n(t)},children:[(0,a.jsx)("option",{value:"10",children:"10"}),(0,a.jsx)("option",{value:"20",children:"20"}),(0,a.jsx)("option",{value:"40",children:"40"}),(0,a.jsx)("option",{value:"99999999",children:"All"})]})]})," ","entries"]})})};t.Z=r.memo(s)},12721:function(e,t,n){n(72791);var r=n(84341),a=n(80184);t.Z=function(){return(0,a.jsxs)("div",{className:" w-100 ",children:[(0,a.jsxs)("div",{className:"row ",children:[(0,a.jsx)("div",{className:"col-6 d-flex ",children:(0,a.jsx)(r.ZP,{width:200,height:25})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:80,height:30})})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(r.ZP,{height:40}),(0,a.jsx)(r.ZP,{count:10,height:25})]}),(0,a.jsxs)("div",{className:"row d-flex mt-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)(r.ZP,{width:220,height:20})}),(0,a.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,a.jsx)(r.ZP,{width:200,height:30})})]})]})}},98158:function(e,t,n){n(72791);var r=n(36652),a=n(80184);t.Z=function(e){var t=e.content,n=e.children;return(0,a.jsx)(r.ZP,{content:t,children:n})}},16382:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(70885),a=n(72791),s=n(50645),i=n(66794),c=n(16030),o=n(90883),l=n(74066),u=(n(98158),n(35125)),d=(n(2353),n(40084),n(20741)),m=n(12202),p=n(80184),h=function(e){var t=e.show,n=e.setShow,r=e.info,s=e.setInfo,i=(0,a.useRef)(null),c=r.cardId,o=r.userPhoto,l=r.cardNumber,h=r.submissionNumber,f=r.fullName,x=r.fatherName,v=r.dob,g=r.gender,j=r.district,N=r.palika,b=r.signaturePhoto,P=r.approvedBy,C=r.cardIssueDate,w=o,y="Card No:- ".concat(l),k="Sex:- ".concat("m"===g?"Male":"f"===g?"Female":"Other"),Z="Name:- ".concat(f),S="Father's Name:- ".concat(x),I="Date of Birth:- ".concat(v),L="Address:-",R="".concat(null===j||void 0===j?void 0:j.name),A="Municipality:- ".concat(null===N||void 0===N?void 0:N.name),T="Officer's Name: ".concat(P&&null!==P&&void 0!==P&&P.name?null===P||void 0===P?void 0:P.name:""),_="Designation: ".concat(P&&null!==P&&void 0!==P&&P.designation?null===P||void 0===P?void 0:P.designation:""),D="Issued Date: ".concat(C?C.slice(0,10):""),O="Signature: ",F=15,M=60,E=new u.default({orientation:"landscape",unit:"mm",format:[430,270]});E.setFontSize(40),M+=45,E.text(y,F,M),M+=18,E.text(Z,F,M),M+=18,E.text(S,F,M),M+=18,E.text(I,F,M),E.text(k,215,M),M+=18,E.text(L,F,M);var B=E.getTextWidth(L);E.text(R,F+B+4,M),E.setLineWidth(.01),E.setLineDashPattern([1,1]),E.setDrawColor(0,0,0),M+=18,E.text(A,F,M),M+=18,M+=18,E.addImage(w,323,85,90,96.5),E.setLineDash([]),E.addPage();var U=25;E.text("Card Holder's",20,U),E.setLineWidth(.05),E.setDrawColor(0,0,0),E.line(20,29,105,29),E.text("Card Issuing Authority",215,U),E.setLineWidth(.07),E.setDrawColor(0,0,0),E.line(215,29,355,29),U+=20;var z=E.getTextWidth(O),H=JSON.stringify({id:c,submissionNumber:h,cardNumber:l}),G=document.createElement("canvas"),W=G.getContext("2d");i.current={data:G,ctx:W},d.toCanvas(G,H,(function(e){e?console.error(e):console.log("QR Code generated successfully")})),E.addImage(G,"PNG",14,107,70,70),E.addImage(b,"PNG",z+6,40,50,40),E.text(O,20,U),E.text(T,200,U),U+=20,E.text(_,200,U),U+=20,E.addImage(null===P||void 0===P?void 0:P.signaturePhoto,"PNG",290,70,35,25),E.text("Signature:",200,U),U+=20,E.text(D,200,U),U+=20,E.setFontSize(34),U+=40;var q=E.output("blob"),J=URL.createObjectURL(q),Q="".concat(J,"#toolbar=0"),Y=t?"modal display-block":"modal display-none";return(0,p.jsxs)("div",{className:Y,tabIndex:"-1",children:[(0,p.jsx)("div",{className:"modal-dialog modal-lg",children:(0,p.jsxs)("div",{className:"modal-content content",children:[(0,p.jsxs)("div",{className:"modal-header",children:[(0,p.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Print Preview"}),(0,p.jsx)("button",{type:"button",className:"btn-close","data-dismiss":"modal","aria-label":"Close",onClick:function(){n(!1),s("")},children:(0,p.jsx)(m.aHS,{})})]}),(0,p.jsxs)("div",{className:"modal-body text-center",children:[!l&&(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{children:"Card Number is not generated."}),(0,p.jsx)("p",{children:"Please request for card number first."})]}),(0,p.jsx)("iframe",{type:"application/pdf",width:"500px",src:Q,height:"630px",title:"Print Preview"})]}),(0,p.jsx)("canvas",{ref:i,style:{display:"none"}})]})})," "]})},f=function(e){var t=e.currentPage,n=e.postsPerPage,s=e.setCurrentPage,u=e.count,d=e.maxPageNumberLimit,m=e.setMaxPageNumberLimit,f=e.minPageNumberLimit,x=e.setMinPageNumberLimit,v=(0,a.useState)(!1),g=(0,r.Z)(v,2),j=g[0],N=g[1],b=(0,a.useState)(null),P=(0,r.Z)(b,2),C=P[0],w=P[1],y=(0,c.v9)((function(e){return e.auth.permissions})),k=(0,c.v9)((function(e){return e.auth.isAdmin})),Z=(0,c.v9)((function(e){return e.auth.isSuperuser})),S=(0,c.v9)((function(e){return e.printedCard.printedCards})),I=(0,c.v9)((function(e){return e.printedCard.previous})),L=(0,c.v9)((function(e){return e.printedCard.next})),R=(0,c.I0)(),A=(0,a.useState)(5),T=(0,r.Z)(A,1)[0];y.includes("can_read_entrypass");return(0,p.jsxs)(p.Fragment,{children:[(null===S||void 0===S?void 0:S.length)>0?(0,p.jsxs)("div",{className:"mt-2",children:[(0,p.jsx)("div",{className:"table-scrollable",children:(0,p.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",style:{width:"2%"},children:"S.N"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Name"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Email"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Card Number"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Citizenship"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Mobile number"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"DOB B.S"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Office"}),(0,p.jsx)("th",{scope:"col",className:"text-left",children:"Reference"})]})}),(0,p.jsx)("tbody",{children:(null===S||void 0===S?void 0:S.length)>0&&S.map((function(e,r){var a=e.id,s=e.fullName,i=e.email,c=e.cardNumber,o=e.citizenshipNumber,l=e.mobileNumber,u=e.submissionNumber,d=e.dobBs,m=e.office;return(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{className:"fw-bold",style:{width:"2%"},children:[n*(t-1)+(r+1)," "]}),(0,p.jsx)("td",{className:"text-left",children:s}),(0,p.jsx)("td",{className:"text-left",style:{wordBreak:"break-all"},children:""!==i?i:"N/A"}),(0,p.jsx)("td",{className:"text-left",children:c||"N/A"}),(0,p.jsx)("td",{className:"text-left",children:o||"N/A"}),(0,p.jsx)("td",{className:"text-left",children:l}),(0,p.jsx)("td",{className:"text-left",children:d}),(0,p.jsx)("td",{className:"text-left",children:null===m||void 0===m?void 0:m.name}),(0,p.jsx)("td",{className:"text-left",children:u})]},a)}))})]})}),u>0&&(0,p.jsx)(o.Z,{currentPage:t,postsPerPage:n,count:u,paginate:function(e){R((0,i.R8)({number:e,postsPerPage:n})),s(e)},handleClick:function(e){"previous"===e?(R((0,i.TI)(I)),s((function(e){return e-1})),(t-1)%T===0&&(m(d-T),x(f-T))):"next"===e&&(R((0,i.hj)(L)),s((function(e){return e+1})),t+1>d&&(m(d+T),x(f+T)))},setCurrentPage:s,minPageNumberLimit:f,maxPageNumberLimit:d})]}):(0,p.jsx)(l.Z,{}),j&&(0,p.jsx)(h,{show:j,setShow:N,info:C,setInfo:w})]})},x=n(12721),v=n(537),g=function(){var e=(0,c.v9)((function(e){return e.printedCard.printedCards})),t=(0,c.v9)((function(e){return e.printedCard.loading})),n=(0,c.v9)((function(e){return e.printedCard.loadingUpdated})),o=(0,c.v9)((function(e){return e.printedCard.count})),l=(0,c.v9)((function(e){return e.search.search})),u=(0,c.I0)(),d=(0,a.useState)(1),m=(0,r.Z)(d,2),h=m[0],g=m[1],j=(0,a.useState)(5),N=(0,r.Z)(j,2),b=N[0],P=N[1],C=(0,a.useState)(0),w=(0,r.Z)(C,2),y=w[0],k=w[1],Z=(0,a.useState)(10),S=(0,r.Z)(Z,2),I=S[0],L=S[1];return(0,a.useEffect)((function(){0===I?u(""===l?(0,i.Fz)(o):(0,i.o1)(l,o)):""===l?(I===s.P||g(1),u((0,i.Fz)(I))):(g(1),P(5),k(0),u((0,i.o1)(l,I)))}),[u,I,l]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"user-card",children:[(0,p.jsx)("div",{className:"header-content",children:(0,p.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Printed Cards Listing"})}),(0,p.jsxs)("div",{className:"".concat((null===e||void 0===e?void 0:e.length)>0?"office-card-body":"card-body"),children:[(0,p.jsx)("div",{className:"row m-0 p-0",children:(null===e||void 0===e?void 0:e.length)>0&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"col-6",children:(0,p.jsx)(v.Z,{postsPerPage:I,setPostsPerPage:L})})})}),t&&(0,p.jsx)(x.Z,{}),n&&(0,p.jsx)(x.Z,{}),!t&&!n&&(0,p.jsx)(f,{currentPage:h,setCurrentPage:g,postsPerPage:I,setPostsPerPage:L,count:o,maxPageNumberLimit:b,setMaxPageNumberLimit:P,minPageNumberLimit:y,setMinPageNumberLimit:k,search:l})]})]})})}},66794:function(e,t,n){n.d(t,{hj:function(){return j},R8:function(){return N},TI:function(){return g},Fz:function(){return v},o1:function(){return b}});var r=n(15861),a=n(64687),s=n.n(a),i=n(89731),c=function(e){return i.ZP.get("api/v1/application/entry-pass-list?offset=0&limit=".concat(e,"&ordering=-id&status=printed&application_type=new"))},o=function(e){return i.ZP.get(e)},l=function(e){return i.ZP.get(e)},u=function(e,t){return i.ZP.get("api/v1/application/entry-pass-list?offset=".concat((e-1)*t,"&limit=").concat(t,"&ordering=-id&status=printed&application_type=new"))},d=function(e,t){return i.ZP.get("api/v1/application/entry-pass-list?offset=0&limit=".concat(t,"&search=").concat(e,"&status=printed&application_type=new"))},m=n(65508),p=function(){return{type:m.S.LOADING_PRINTED_CARD}},h=function(e){return{type:m.S.GET_PRINTED_CARD_SUCCESS,payload:e}},f=function(e){return{type:m.S.GET_PRINTED_CARD_FAIL,payload:e}},x=n(29801),v=function(e){return function(){var t=(0,r.Z)(s().mark((function t(n){var r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(p()),t.next=4,c(e);case 4:r=t.sent,a=r.data,n(h(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(f(t.t0)),(0,x.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=(0,r.Z)(s().mark((function t(n){var r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(p()),t.next=4,o(e);case 4:r=t.sent,a=r.data,n(h(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(f(t.t0)),(0,x.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=(0,r.Z)(s().mark((function t(n){var r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(p()),t.next=4,l(e);case 4:r=t.sent,a=r.data,n(h(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(f(t.t0)),(0,x.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},N=function(e){var t=e.number,n=e.postsPerPage;return function(){var e=(0,r.Z)(s().mark((function e(r){var a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(p()),e.next=4,u(t,n);case 4:a=e.sent,i=a.data,r(h(i)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(f(e.t0)),(0,x.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e,t){return function(){var n=(0,r.Z)(s().mark((function n(r){var a,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(p()),n.next=4,d(e,t);case 4:a=n.sent,i=a.data,r(h(i)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(f(n.t0)),(0,x.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}},89731:function(e,t,n){n.d(t,{Yb:function(){return d}});var r=n(15861),a=n(64687),s=n.n(a),i=n(74569),c=n.n(i),o=n(90106),l=n(48044),u=n(30577),d=(c().create({baseURL:"http://chinapass.sushiloli.com.np"}),c().create({baseURL:"http://localhost:9010",headers:{"Content-Type":"application/json"}})),m=c().create({baseURL:"http://chinapass.sushiloli.com.np",headers:{"Content-Type":"application/json"}});m.interceptors.request.use((function(e){if(window.navigator.onLine)return e.headers.Authorization=localStorage.getItem("accessToken")?"Bearer ".concat(localStorage.getItem("accessToken")):null,e.baseURL="http://chinapass.sushiloli.com.np",e}),(function(e){return Promise.reject(e)})),m.interceptors.response.use((function(e){return e}),function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,a,i,c,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.config,401===t.response.status&&"auth/token/refresh"===c.url&&o.h.dispatch({type:l.w.AUTH_ERROR}),"token_not_valid"!==(null===(n=t.response)||void 0===n?void 0:n.data.code)||c._retry){e.next=19;break}return c._retry=!0,e.prev=4,d=JSON.stringify({refresh:localStorage.getItem("refreshToken")}),localStorage.removeItem("accessToken"),e.next=9,m.post("auth/token/refresh",d);case 9:if(200!==(p=e.sent).status){e.next=14;break}return localStorage.setItem("accessToken",null===p||void 0===p?void 0:p.data.access),c.headers.Authorization="Bearer ".concat(null===p||void 0===p?void 0:p.data.access),e.abrupt("return",m(c));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),o.h.dispatch({type:l.w.AUTH_ERROR});case 19:if("No Internet"===t&&u.Am.error("No Internet Connection !!!"),"Network Error"===t.message&&u.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),500===(null===(r=t.response)||void 0===r?void 0:r.status)&&u.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),404===(null===(a=t.response)||void 0===a?void 0:a.status)&&u.Am.error("Page Not Found !!!!!",{autoClose:1200}),401!==(null===(i=t.response)||void 0===i?void 0:i.status)&&"Invalid token specified"!==t.message){e.next=26;break}return o.h.dispatch({type:l.w.AUTH_ERROR}),e.abrupt("return",Promise.reject(t.response.data.detail));case 26:if(!(t.response&&t.response.status>=400&&t.response.status<500)){e.next=33;break}if(!t.response.data.detail){e.next=32;break}return e.abrupt("return",Promise.reject("".concat(t.response.data.detail)));case 32:return e.abrupt("return",Promise.reject("".concat(t.response.statusText)));case 33:return e.abrupt("return",Promise.reject(t));case 34:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),t.ZP=m},50645:function(e,t,n){n.d(t,{P:function(){return r}});var r=10},40084:function(e,t,n){e.exports=n.p+"static/media/back.85dacb5cbc03f03de118.png"},2353:function(e,t,n){e.exports=n.p+"static/media/front.945608de0df06e3ec516.png"}}]);
//# sourceMappingURL=6382.87745099.chunk.js.map