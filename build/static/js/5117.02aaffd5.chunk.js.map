{"version":3,"file":"static/js/5117.02aaffd5.chunk.js","mappings":"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","sources":["Component/ReportModal/NewCard/PDFReportModal.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport logo from \"../../../assets/nepal-government.png\";\n\nconst cambria =\n  require(\"../../../assets/Fonts/Cambria-Font-For-Windows.ttf\").default;\n\nconst PDFReportModal = ({ formData }) => {\n  const { status } = formData;\n  const organization = useSelector(\n    (state) => state.organizationSetup.organization\n  );\n\n  const cards = useSelector((state) => state.report.cards);\n  const userName = useSelector((state) => state.auth.username);\n\n  useEffect(() => {\n    if (cards.length > 0) {\n      const { address, phoneNo } = organization;\n      const unit = \"mm\";\n      const size = \"A4\"; // Use A1, A2, A3 or A4\n      const orientation = \"portrait\";\n      const doc = new jsPDF(orientation, unit, size);\n      //\n      const currentDate = `Printed Date/Time: ${new Date().toLocaleString(\n        \"ja-JP\"\n      )}`;\n\n      const cardTitle = \"New Card Report\";\n      const cardType = `Card Type: ${status ? status : \"N/A\"}`;\n      const printedBy = `Printed By: ${userName}`;\n\n      const title = `Department Of Immigration`;\n\n      const footer =\n        \"This is computer genereated report no need of seal and verification\";\n\n      const table = document.getElementById(\"table\");\n      const totalPagesExp = \"{total_pages_count_string}\";\n      autoTable(doc, {\n        theme: \"grid\",\n        html: table,\n        styles: { textColor: [0, 0, 0], lineWidth: 0.1, fontSize: 7 },\n        columnStyles: {\n          0: { halign: \"center\" },\n        },\n        headStyles: {\n          fillColor: [255, 255, 255],\n        },\n        startY: 60,\n        didDrawPage: function (data) {\n          //   doc.setLineWidth(0, 160);\n          doc.setFont(cambria, \"normal\");\n\n          doc.setFontSize(11);\n          if (data.pageNumber === 1) {\n            doc.setFontSize(11);\n            const pageWidth = doc.internal.pageSize.getWidth();\n            const logoWidth = 26;\n            const cardTitleWidth = doc.getTextWidth(cardTitle); // Get the width of your text\n            const titleWidth = doc.getTextWidth(title);\n            const addressWidth = doc.getTextWidth(address);\n            const phoneNoWidth = doc.getTextWidth(\n              phoneNo ? phoneNo : \"+977-01-4429659, 4429660\"\n            );\n            const formTitleWidth = doc.getTextWidth(\n              \"Nepal-China Entry/Exit Pass Application Form\"\n            );\n\n            // Calculate the x-coordinate to center the text\n            const cardTitleX = (pageWidth - cardTitleWidth) / 2;\n            const logoX = (pageWidth - logoWidth) / 2;\n            const titleX = (pageWidth - titleWidth) / 2;\n            const addressX = (pageWidth - addressWidth) / 2;\n            const phoneNoX = (pageWidth - phoneNoWidth) / 2;\n            const formTitleX = (pageWidth - formTitleWidth) / 2;\n\n            let yPos = 22;\n            if (logo) {\n              doc.addImage(logo, \"PNG\", logoX, 2, 20, 0);\n            }\n\n            doc.setFontSize(10);\n            doc.text(title, titleX, yPos);\n            yPos = yPos + 5;\n            doc.text(address, addressX, yPos);\n            yPos = yPos + 5;\n            doc.text(\n              phoneNo ? phoneNo : \"+977-01-4429659, 4429660\",\n              phoneNoX,\n              yPos\n            );\n            yPos = yPos + 5;\n            doc.text(\n              \"Nepal-China Entry/Exit Pass Application Form\",\n              formTitleX,\n              yPos\n            );\n            yPos = yPos + 5;\n            doc.setFontSize(8);\n            doc.setTextColor(\"#OOOOO\");\n            doc.text(currentDate, 140, yPos);\n            yPos = yPos + 5;\n            doc.text(cardType, 140, yPos);\n            yPos = yPos + 5;\n            doc.text(printedBy, 140, yPos);\n            yPos = yPos + 5;\n            doc.setFontSize(10);\n            doc.text(cardTitle, cardTitleX, yPos);\n          }\n\n          if (typeof doc.putTotalPages === \"function\") {\n            doc.putTotalPages(totalPagesExp);\n          }\n\n          if (data.pageNumber === 1) {\n            // doc.setFontSize(15);\n            doc.setFont(cambria, \"normal\");\n            doc.text(\"title\", 320, 42);\n          }\n          // footer\n          let str = \"Page \" + doc.internal.getNumberOfPages();\n          // Total page number plugin only available in jspdf v1.0+\n          if (typeof doc.putTotalPages === \"function\") {\n            str = str + \" of \" + totalPagesExp;\n          }\n\n          const pageSize = doc.internal.pageSize;\n          const pageHeight = pageSize.height\n            ? pageSize.height\n            : pageSize.getHeight();\n          doc.setFont(cambria, \"normal\");\n          doc.setFontSize(9);\n          doc.setTextColor(\"#000000\");\n          // data.settings.margin.left\n          doc.text(str, 18, pageHeight - 10);\n        },\n\n        didParseCell: function (data) {\n          // let rows = data.table.body;\n          if (data.section === \"body\" && data.row.index === cards?.length) {\n            data.cell.styles.fontStyle = \"bold\";\n          }\n        },\n        // margin: { top: 10 },\n      });\n\n      const pageWidth = doc.internal.pageSize.getWidth();\n      const pageSize = doc.internal.pageSize;\n      const pageHeight = pageSize.height\n        ? pageSize.height\n        : pageSize.getHeight();\n\n      if (typeof doc.putTotalPages === \"function\") {\n        doc.putTotalPages(totalPagesExp);\n      }\n      doc.setFontSize(8);\n      doc.setFont(cambria, \"normal\");\n      const footerWidth = doc.getTextWidth(footer);\n      const textFooter = (pageWidth - footerWidth) / 2;\n\n      doc.text(footer, textFooter, pageHeight - 6);\n\n      doc.setProperties({\n        title: \"New Entry/Exit Pass Report\",\n      });\n      window.open(doc.output(\"bloburl\"), \"_blank\");\n    }\n  }, [cards]);\n\n  return (\n    <div>\n      <table id=\"table\" style={{ display: \"none\" }}>\n        <thead>\n          <tr>\n            <th scope=\"col\">#</th>\n            <th scope=\"col\">Submission Number</th>\n            <th scope=\"col\">Name </th>\n            <th scope=\"col\">Citizenship Number</th>\n            <th scope=\"col\">Contact</th>\n            <th scope=\"col\">Card No</th>\n            <th scope=\"col\">Father Name</th>\n            <th scope=\"col\">Office</th>\n            <th scope=\"col\">Status</th>\n          </tr>\n        </thead>\n        <tbody>\n          {cards?.length > 0\n            ? cards.map((value, i) => {\n                const {\n                  id,\n                  submissionNumber,\n                  fullName,\n                  cardNumber,\n                  citizenshipNumber,\n                  mobileNumber,\n                  fatherName,\n                  office,\n                  status,\n                } = value;\n                return (\n                  <tr key={i}>\n                    <td>{i + 1}</td>\n                    <td>{submissionNumber}</td>\n                    <td>{fullName}</td>\n                    <td>{citizenshipNumber ? citizenshipNumber : \"N/A\"}</td>\n                    <td>{mobileNumber}</td>\n                    <td>{cardNumber ? cardNumber : \"N/A\"}</td>\n                    <td>{fatherName}</td>\n                    <td>{office ? office?.name : \"N/A\"}</td>\n                    <td>\n                      {status === \"pending\"\n                        ? \"PENDING\"\n                        : status === \"verified\"\n                        ? \"VERIFIED\"\n                        : status === \"approved\"\n                        ? \"APPROVED\"\n                        : status === \"rejected\"\n                        ? \"REJECTED\"\n                        : \"PRINTED\"}\n                    </td>\n                  </tr>\n                );\n              })\n            : \"\"}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default PDFReportModal;\n"],"names":["cambria","require","status","formData","organization","useSelector","state","organizationSetup","cards","report","userName","auth","username","useEffect","length","address","phoneNo","doc","jsPDF","currentDate","Date","toLocaleString","cardTitle","cardType","printedBy","title","footer","table","document","getElementById","totalPagesExp","autoTable","theme","html","styles","textColor","lineWidth","fontSize","columnStyles","halign","headStyles","fillColor","startY","didDrawPage","data","setFont","setFontSize","pageNumber","pageWidth","internal","pageSize","getWidth","cardTitleX","getTextWidth","logoX","titleX","addressX","phoneNoX","formTitleX","yPos","logo","addImage","text","setTextColor","putTotalPages","str","getNumberOfPages","pageHeight","height","getHeight","didParseCell","section","row","index","cell","fontStyle","textFooter","setProperties","window","open","output","id","style","display","scope","map","value","i","submissionNumber","fullName","cardNumber","citizenshipNumber","mobileNumber","fatherName","office","name"],"sourceRoot":""}