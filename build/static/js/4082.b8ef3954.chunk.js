"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4082],{29801:function(e,t,n){n.d(t,{Mn:function(){return s},My:function(){return a},W2:function(){return i}});var r=n(30577);r.Am.configure();var s=function(e){var t="string"===typeof e?e:"error";r.Am.error(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},a=function(e){var t="string"===typeof e?e:"success";r.Am.success(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},i=function(e){var t="string"===typeof e?e:"success";r.Am.info(t,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},11579:function(e,t,n){n.d(t,{Z:function(){return s}});n(72791);var r=n(80184),s=function(){return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"progress-wrapper",children:(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"circle border"})})})})}},74066:function(e,t,n){n(72791);var r=n(80184);t.Z=function(){return(0,r.jsx)("div",{className:"card w-50 p-5 text-center justify-content-center no-data",children:(0,r.jsx)("h4",{className:"fw-normal mb-3",children:"No data to Display"})})}},90883:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(72791),s=n(80184),a=function(e){var t=e.offset,n=e.limit,a=e.count;return(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)("p",{children:["Showing ",t," to"," ",n>a||0===n?a:n," of ",a," entries"]})})},i=r.memo(a),c=function(e){var t=e.postsPerPage,n=e.totalPosts,r=e.paginate,a=e.handleClick,i=e.currentPage,c=e.maxPageNumberLimit,o=e.minPageNumberLimit,u=[];if(t>0)for(var l=1;l<=Math.ceil(n/t);l++)u.push(l);u.length;return o>=1&&(0,s.jsx)("button",{className:"page-link",onClick:function(){return a("previous")},children:"\u2026"}),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("ul",{className:"pagination pagination-sm justify-content-end",children:[(0,s.jsx)("li",{className:"page-item ",children:(0,s.jsx)("button",{className:"page-link",onClick:function(){return a("previous")},disabled:i===u[0],children:"\xab"})}),u.map((function(e,t){return e<c+1&&e>o?(0,s.jsx)("li",{className:"page-item",children:(0,s.jsx)("button",{onClick:function(){return r(e)},className:"page-link ".concat(t+1===i?"active":null),children:e})},e):null})),(0,s.jsx)("li",{className:"page-item",children:(0,s.jsx)("button",{className:"page-link",onClick:function(){return a("next")},disabled:i===u[u.length-1],children:"\xbb"})})]})})},o=r.memo(c),u=function(e){var t=e.currentPage,n=e.postsPerPage,r=e.count,a=e.paginate,c=e.handleClick,u=e.setCurrentPage,l=e.minPageNumberLimit,d=e.maxPageNumberLimit;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(i,{offset:1+(t-1)*n,limit:n*t,count:r})}),n<r&&(0,s.jsx)("div",{className:"col-6 text-right",children:(0,s.jsx)(o,{postsPerPage:n,totalPosts:r,paginate:a,handleClick:c,currentPage:t,setCurrentPage:u,minPageNumberLimit:l,maxPageNumberLimit:d})})]})})}},537:function(e,t,n){var r=n(72791),s=n(80184),a=function(e){var t=e.postsPerPage,n=e.setPostsPerPage;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("p",{className:"fw-normal p-0 m-0",children:["Show",(0,s.jsxs)("span",{className:"ml-1 mr-1",children:[" ",(0,s.jsxs)("select",{value:t,onChange:function(e){var t=Number(e.target.value);n(t)},children:[(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"20",children:"20"}),(0,s.jsx)("option",{value:"40",children:"40"}),(0,s.jsx)("option",{value:"99999999",children:"All"})]})]})," ","entries"]})})};t.Z=r.memo(a)},12721:function(e,t,n){n(72791);var r=n(84341),s=n(80184);t.Z=function(){return(0,s.jsxs)("div",{className:" w-100 ",children:[(0,s.jsxs)("div",{className:"row ",children:[(0,s.jsx)("div",{className:"col-6 d-flex ",children:(0,s.jsx)(r.ZP,{width:200,height:25})}),(0,s.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,s.jsx)(r.ZP,{width:80,height:30})})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(r.ZP,{height:40}),(0,s.jsx)(r.ZP,{count:10,height:25})]}),(0,s.jsxs)("div",{className:"row d-flex mt-2",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(r.ZP,{width:220,height:20})}),(0,s.jsx)("div",{className:"col-6 d-flex justify-content-end",children:(0,s.jsx)(r.ZP,{width:200,height:30})})]})]})}},98158:function(e,t,n){n(72791);var r=n(36652),s=n(80184);t.Z=function(e){var t=e.content,n=e.children;return(0,s.jsx)(r.ZP,{content:t,children:n})}},4082:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(70885),s=n(72791),a=n(50645),i=n(15861),c=n(64687),o=n.n(c),u=n(89731),l=function(e){return u.ZP.get("api/v1/application/entry-pass-list?offset=0&limit=".concat(e,"&ordering=-id&status=verified&application_type=reprint"))},d=function(e){return u.ZP.get(e)},p=function(e){return u.ZP.get(e)},h=function(e,t){return u.ZP.get("api/v1/application/entry-pass-list?offset=".concat((e-1)*t,"&limit=").concat(t,"&ordering=-id&status=verified&application_type=reprint"))},f=function(e,t){return u.ZP.get("api/v1/application/entry-pass-list?offset=0&limit=".concat(t,"&search=").concat(e,"&status=verified&application_type=reprint"))},m=function(e){return u.ZP.patch("api/v1/application/entry-pass/approve/".concat(e))},v=n(18750),x=function(){return{type:v.V.LOADING}},g=function(e){return{type:v.V.GET_REPRINT_CARD_SUCCESS,payload:e}},j=function(e){return{type:v.V.GET_REPRINT_CARD_FAIL,payload:e}},P=function(e){return{type:v.V.APPROVE_CARD_SUCCESS,payload:e}},N=n(29801),b=function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,l(e);case 4:r=t.sent,s=r.data,n(g(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(j(t.t0)),(0,N.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},C=function(e,t){return function(){var n=(0,i.Z)(o().mark((function n(r){var s,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(x()),n.next=4,f(e,t);case 4:s=n.sent,a=s.data,r(g(a)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),r(j(n.t0)),(0,N.Mn)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},k=n(12202),y=n(16030),w=n(90883),Z=n(74066),A=n(98158),L=n(11579),R=n(80184),S=function(e){var t=e.currentPage,n=e.postsPerPage,a=e.setCurrentPage,c=e.count,u=e.maxPageNumberLimit,l=e.setMaxPageNumberLimit,f=e.minPageNumberLimit,C=e.setMinPageNumberLimit,S=(0,y.v9)((function(e){return e.auth.permissions})),_=(0,y.v9)((function(e){return e.auth.isAdmin})),I=(0,y.v9)((function(e){return e.auth.isSuperuser})),T=(0,y.v9)((function(e){return e.reprintCard.loadingPrint})),E=(0,y.v9)((function(e){return e.reprintCard.reprintCards})),O=(0,y.v9)((function(e){return e.reprintCard.previous})),M=(0,y.v9)((function(e){return e.reprintCard.next})),F=(0,y.I0)(),U=(0,s.useState)(5),B=(0,r.Z)(U,1)[0],V=function(e){F(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,m(e);case 4:return r=t.sent,s=r.data,n(P(s)),n(b(10)),t.abrupt("return",!0);case 11:t.prev=11,t.t0=t.catch(0),n((a=t.t0,{type:v.V.APPROVE_CARD_FAIL,payload:a})),(0,N.Mn)(t.t0);case 15:case"end":return t.stop()}var a}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))},D=(null===S||void 0===S?void 0:S.includes("can_verify_entrypass"))||I;return(0,R.jsxs)(R.Fragment,{children:[T&&(0,R.jsx)(L.Z,{}),(null===E||void 0===E?void 0:E.length)>0?(0,R.jsxs)("div",{className:"mt-2",children:[(0,R.jsx)("div",{className:"table-scrollable",children:(0,R.jsxs)("table",{className:"table table-hover table-bordered text-center",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{scope:"col",style:{width:"2%"},children:"S.N"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Email"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Name"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Citizenship"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Mobile number"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"DOB B.S"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Office"}),(0,R.jsx)("th",{scope:"col",className:"text-left",children:"Reference"}),!_&&!I&&(0,R.jsx)("th",{scope:"col",children:"Action"})]})}),(0,R.jsx)("tbody",{children:(null===E||void 0===E?void 0:E.length)>0&&E.map((function(e,r){var s=e.id,a=e.fullName,i=e.email,c=e.citizenshipNumber,o=e.mobileNumber,u=e.submissionNumber,l=e.dobBs,d=e.office;return(0,R.jsxs)("tr",{children:[(0,R.jsxs)("td",{className:"fw-bold",style:{width:"2%"},children:[n*(t-1)+(r+1)," "]}),(0,R.jsx)("td",{className:"text-left",children:a}),(0,R.jsx)("td",{className:"text-left",style:{wordBreak:"break-all"},children:""!==i?i:"N/A"}),(0,R.jsx)("td",{className:"text-left",children:c}),(0,R.jsx)("td",{className:"text-left",children:o}),(0,R.jsx)("td",{className:"text-left",children:l}),(0,R.jsx)("td",{className:"text-left",children:null===d||void 0===d?void 0:d.name}),(0,R.jsx)("td",{className:"text-left",children:u}),!_&&!I&&(0,R.jsx)("td",{children:(0,R.jsx)(A.Z,{content:"Verify",children:(0,R.jsx)("button",{disabled:!D,onClick:function(){return V(s)},className:"btn btn-md  btn-success mx-2",children:(0,R.jsx)(k.l_A,{size:16})})})})]},s)}))})]})}),c>0&&(0,R.jsx)(w.Z,{currentPage:t,postsPerPage:n,count:c,paginate:function(e){F(function(e){var t=e.number,n=e.postsPerPage;return function(){var e=(0,i.Z)(o().mark((function e(r){var s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(x()),e.next=4,h(t,n);case 4:s=e.sent,a=s.data,r(g(a)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r(j(e.t0)),(0,N.Mn)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}({number:e,postsPerPage:n})),a(e)},handleClick:function(e){"previous"===e?(F(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,d(e);case 4:r=t.sent,s=r.data,n(g(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(j(t.t0)),(0,N.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(O)),a((function(e){return e-1})),(t-1)%B===0&&(l(u-B),C(f-B))):"next"===e&&(F(function(e){return function(){var t=(0,i.Z)(o().mark((function t(n){var r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(x()),t.next=4,p(e);case 4:r=t.sent,s=r.data,n(g(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(j(t.t0)),(0,N.Mn)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(M)),a((function(e){return e+1})),t+1>u&&(l(u+B),C(f+B)))},setCurrentPage:a,minPageNumberLimit:f,maxPageNumberLimit:u})]}):(0,R.jsx)(Z.Z,{})]})},_=n(12721),I=n(537),T=function(){var e=(0,y.v9)((function(e){return e.reprintCard.reprintCards})),t=(0,y.v9)((function(e){return e.reprintCard.loading})),n=(0,y.v9)((function(e){return e.reprintCard.loadingUpdated})),i=(0,y.v9)((function(e){return e.reprintCard.count})),c=(0,y.v9)((function(e){return e.search.search})),o=(0,y.I0)(),u=(0,s.useState)(1),l=(0,r.Z)(u,2),d=l[0],p=l[1],h=(0,s.useState)(5),f=(0,r.Z)(h,2),m=f[0],v=f[1],x=(0,s.useState)(0),g=(0,r.Z)(x,2),j=g[0],P=g[1],N=(0,s.useState)(10),k=(0,r.Z)(N,2),w=k[0],Z=k[1];return(0,s.useEffect)((function(){0===w?o(""===c?b(i):C(c,i)):""===c?(w===a.P||p(1),o(b(w))):(p(1),v(5),P(0),o(C(c,w)))}),[o,w,c]),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:"user-card",children:[(0,R.jsx)("div",{className:"header-content",children:(0,R.jsx)("h4",{className:"mb-sm-0 fw-normal",children:"Reprint Cards Listing"})}),(0,R.jsxs)("div",{className:"".concat((null===e||void 0===e?void 0:e.length)>0?"office-card-body":"card-body"),children:[(0,R.jsx)("div",{className:"row m-0 p-0",children:(null===e||void 0===e?void 0:e.length)>0&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("div",{className:"col-6",children:(0,R.jsx)(I.Z,{postsPerPage:w,setPostsPerPage:Z})})})}),t&&(0,R.jsx)(_.Z,{}),n&&(0,R.jsx)(_.Z,{}),!t&&!n&&(0,R.jsx)(S,{currentPage:d,setCurrentPage:p,postsPerPage:w,setPostsPerPage:Z,count:i,maxPageNumberLimit:m,setMaxPageNumberLimit:v,minPageNumberLimit:j,setMinPageNumberLimit:P,search:c})]})]})})}},89731:function(e,t,n){n.d(t,{Yb:function(){return d}});var r=n(15861),s=n(64687),a=n.n(s),i=n(74569),c=n.n(i),o=n(90106),u=n(48044),l=n(30577),d=(c().create({baseURL:"http://chinapass.sushiloli.com.np"}),c().create({baseURL:"http://localhost:9010",headers:{"Content-Type":"application/json"}})),p=c().create({baseURL:"http://chinapass.sushiloli.com.np",headers:{"Content-Type":"application/json"}});p.interceptors.request.use((function(e){if(window.navigator.onLine)return e.headers.Authorization=localStorage.getItem("accessToken")?"Bearer ".concat(localStorage.getItem("accessToken")):null,e.baseURL="http://chinapass.sushiloli.com.np",e}),(function(e){return Promise.reject(e)})),p.interceptors.response.use((function(e){return e}),function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,s,i,c,d,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.config,401===t.response.status&&"auth/token/refresh"===c.url&&o.h.dispatch({type:u.w.AUTH_ERROR}),"token_not_valid"!==(null===(n=t.response)||void 0===n?void 0:n.data.code)||c._retry){e.next=19;break}return c._retry=!0,e.prev=4,d=JSON.stringify({refresh:localStorage.getItem("refreshToken")}),localStorage.removeItem("accessToken"),e.next=9,p.post("auth/token/refresh",d);case 9:if(200!==(h=e.sent).status){e.next=14;break}return localStorage.setItem("accessToken",null===h||void 0===h?void 0:h.data.access),c.headers.Authorization="Bearer ".concat(null===h||void 0===h?void 0:h.data.access),e.abrupt("return",p(c));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),o.h.dispatch({type:u.w.AUTH_ERROR});case 19:if("No Internet"===t&&l.Am.error("No Internet Connection !!!"),"Network Error"===t.message&&l.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),500===(null===(r=t.response)||void 0===r?void 0:r.status)&&l.Am.error("Internal Server Error. Contact IT manager !!!",{autoClose:1200}),404===(null===(s=t.response)||void 0===s?void 0:s.status)&&l.Am.error("Page Not Found !!!!!",{autoClose:1200}),401!==(null===(i=t.response)||void 0===i?void 0:i.status)&&"Invalid token specified"!==t.message){e.next=26;break}return o.h.dispatch({type:u.w.AUTH_ERROR}),e.abrupt("return",Promise.reject(t.response.data.detail));case 26:if(!(t.response&&t.response.status>=400&&t.response.status<500)){e.next=33;break}if(!t.response.data.detail){e.next=32;break}return e.abrupt("return",Promise.reject("".concat(t.response.data.detail)));case 32:return e.abrupt("return",Promise.reject("".concat(t.response.statusText)));case 33:return e.abrupt("return",Promise.reject(t));case 34:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),t.ZP=p},50645:function(e,t,n){n.d(t,{P:function(){return r}});var r=10}}]);
//# sourceMappingURL=4082.b8ef3954.chunk.js.map